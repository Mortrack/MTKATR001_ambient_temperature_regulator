<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Application Firmware: Firmware Update module</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Application Firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Firmware Update module</div></div>
</div><!--header-->
<div class="contents">

<p>This module provides the functions required to enable the application to be able to handle Firmware Update requests via ETX OTA Protocol and to install either a Bootloader or an Application Firmware Image in our MCU/MPU if requested by using a desired Hardware Protocol from our MCU/MPU's as a communication channel.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:db/d3d/group__main__etx__ota__config"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d3d/group__main__etx__ota__config.html">ETX OTA Protocol Configuration Files</a></td></tr>
<tr class="memdesc:db/d3d/group__main__etx__ota__config"><td class="mdescLeft">&#160;</td><td class="mdescRight">This module contains both the default and the application ETX OTA Protocol Configuration Files. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d7/d86/group__firmware__update__config"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a></td></tr>
<tr class="memdesc:d7/d86/group__firmware__update__config"><td class="mdescLeft">&#160;</td><td class="mdescRight">This sub-module provides the functions required to enable the firmware_update to be able to store and retrieve the Firmware Update Configurations in or from our MCU/MPU's Flash Memory respectively. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="files" name="files"></a>
Files</h2></td></tr>
<tr class="memitem:d7/d21/firmware__update__config_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d21/firmware__update__config_8h.html">firmware_update_config.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dbe/struct_e_t_x___o_t_a___status__monitor__t.html">ETX_OTA_Status_monitor_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">ETX OTA Status Monitor parameters structure. This contains all the fields of the data that will be required so that the implementer/user of the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html">Firmware Update module</a> can both determine if an ETX OTA Transaction has been completed or not, and what was its resulting ETX OTA Status Exception Code.  <a href="../../d6/dbe/struct_e_t_x___o_t_a___status__monitor__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d25/struct_e_t_x___o_t_a___command___packet__t.html">ETX_OTA_Command_Packet_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">ETX OTA Command Type Packet's parameters structure.  <a href="../../d8/d25/struct_e_t_x___o_t_a___command___packet__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d22/structheader__data__t.html">header_data_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Header Data parameters structure.  <a href="../../da/d22/structheader__data__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dd7/struct_e_t_x___o_t_a___header___packet__t.html">ETX_OTA_Header_Packet_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">ETX OTA Header Type Packet's parameters structure.  <a href="../../d7/dd7/struct_e_t_x___o_t_a___header___packet__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d7c/struct_e_t_x___o_t_a___data___packet__t.html">ETX_OTA_Data_Packet_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">ETX OTA Data Type Packet's parameters structure.  <a href="../../d2/d7c/struct_e_t_x___o_t_a___data___packet__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dae/struct_e_t_x___o_t_a___response___packet__t.html">ETX_OTA_Response_Packet_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">ETX OTA Response Type Packet's parameters structure.  <a href="../../de/dae/struct_e_t_x___o_t_a___response___packet__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gadb0dfac6cc626ec4807901a4b0c6098b"><td class="memItemLeft" align="right" valign="top"><a id="gadb0dfac6cc626ec4807901a4b0c6098b" name="gadb0dfac6cc626ec4807901a4b0c6098b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BL_SIDE_FIRMWARE_UPDATE_H_</b></td></tr>
<tr class="separator:gadb0dfac6cc626ec4807901a4b0c6098b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga578ab5347ebf2677f563566c7452dfa1"><td class="memItemLeft" align="right" valign="top"><a id="ga578ab5347ebf2677f563566c7452dfa1" name="ga578ab5347ebf2677f563566c7452dfa1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ETX_OTA_SOF</b>&#160;&#160;&#160;(0xAA)</td></tr>
<tr class="memdesc:ga578ab5347ebf2677f563566c7452dfa1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Designated Start Of Frame (SOF) byte to indicate the start of an ETX OTA Packet. <br /></td></tr>
<tr class="separator:ga578ab5347ebf2677f563566c7452dfa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c9a7fc87fc7bc655e76a7a7fc5524f4"><td class="memItemLeft" align="right" valign="top"><a id="ga9c9a7fc87fc7bc655e76a7a7fc5524f4" name="ga9c9a7fc87fc7bc655e76a7a7fc5524f4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ETX_OTA_EOF</b>&#160;&#160;&#160;(0xBB)</td></tr>
<tr class="memdesc:ga9c9a7fc87fc7bc655e76a7a7fc5524f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Designated End Of Frame (EOF) byte to indicate the end of an ETX OTA Packet. <br /></td></tr>
<tr class="separator:ga9c9a7fc87fc7bc655e76a7a7fc5524f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca85b60c449ed7b2c22bfb341828859b"><td class="memItemLeft" align="right" valign="top"><a id="gaca85b60c449ed7b2c22bfb341828859b" name="gaca85b60c449ed7b2c22bfb341828859b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ETX_OTA_SOF_SIZE</b>&#160;&#160;&#160;(1U)</td></tr>
<tr class="memdesc:gaca85b60c449ed7b2c22bfb341828859b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Designated SOF field size in bytes in a ETX OTA Packet. <br /></td></tr>
<tr class="separator:gaca85b60c449ed7b2c22bfb341828859b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9aec91cd2950f92b8e297cde915b1d73"><td class="memItemLeft" align="right" valign="top"><a id="ga9aec91cd2950f92b8e297cde915b1d73" name="ga9aec91cd2950f92b8e297cde915b1d73"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ETX_OTA_PACKET_TYPE_SIZE</b>&#160;&#160;&#160;(1U)</td></tr>
<tr class="memdesc:ga9aec91cd2950f92b8e297cde915b1d73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Designated Packet Type field size in bytes in a ETX OTA Packet. <br /></td></tr>
<tr class="separator:ga9aec91cd2950f92b8e297cde915b1d73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26d844eedae10927048ba28df31027aa"><td class="memItemLeft" align="right" valign="top"><a id="ga26d844eedae10927048ba28df31027aa" name="ga26d844eedae10927048ba28df31027aa"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ETX_OTA_DATA_LENGTH_SIZE</b>&#160;&#160;&#160;(2U)</td></tr>
<tr class="memdesc:ga26d844eedae10927048ba28df31027aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Designated Data Length field size in bytes in a ETX OTA Packet. <br /></td></tr>
<tr class="separator:ga26d844eedae10927048ba28df31027aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga31ccfee7f30e5cac204d5402f215106a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga31ccfee7f30e5cac204d5402f215106a">ETX_OTA_DATA_MAX_SIZE</a>&#160;&#160;&#160;(1024U)</td></tr>
<tr class="memdesc:ga31ccfee7f30e5cac204d5402f215106a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Designated maximum expected "Data" field's size in the General Data Format of an ETX OTA Packet.  <br /></td></tr>
<tr class="separator:ga31ccfee7f30e5cac204d5402f215106a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d90bbaf948aedf7b1cce9f990f15544"><td class="memItemLeft" align="right" valign="top"><a id="ga8d90bbaf948aedf7b1cce9f990f15544" name="ga8d90bbaf948aedf7b1cce9f990f15544"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ETX_OTA_CRC32_SIZE</b>&#160;&#160;&#160;(4U)</td></tr>
<tr class="memdesc:ga8d90bbaf948aedf7b1cce9f990f15544"><td class="mdescLeft">&#160;</td><td class="mdescRight">Designated 32-bit CRC field size in bytes in a ETX OTA Packet. <br /></td></tr>
<tr class="separator:ga8d90bbaf948aedf7b1cce9f990f15544"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga564d1aeb914cf5307f8d6723a224dad1"><td class="memItemLeft" align="right" valign="top"><a id="ga564d1aeb914cf5307f8d6723a224dad1" name="ga564d1aeb914cf5307f8d6723a224dad1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ETX_OTA_EOF_SIZE</b>&#160;&#160;&#160;(1U)</td></tr>
<tr class="memdesc:ga564d1aeb914cf5307f8d6723a224dad1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Designated EOF field size in bytes in a ETX OTA Packet. <br /></td></tr>
<tr class="separator:ga564d1aeb914cf5307f8d6723a224dad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72130675e27f87e7658d686a3144288b"><td class="memItemLeft" align="right" valign="top"><a id="ga72130675e27f87e7658d686a3144288b" name="ga72130675e27f87e7658d686a3144288b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ETX_OTA_DATA_OVERHEAD</b>&#160;&#160;&#160;(<a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaca85b60c449ed7b2c22bfb341828859b">ETX_OTA_SOF_SIZE</a> + <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga9aec91cd2950f92b8e297cde915b1d73">ETX_OTA_PACKET_TYPE_SIZE</a> + <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga26d844eedae10927048ba28df31027aa">ETX_OTA_DATA_LENGTH_SIZE</a> + <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga8d90bbaf948aedf7b1cce9f990f15544">ETX_OTA_CRC32_SIZE</a> + <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga564d1aeb914cf5307f8d6723a224dad1">ETX_OTA_EOF_SIZE</a>)</td></tr>
<tr class="memdesc:ga72130675e27f87e7658d686a3144288b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data overhead in bytes of an ETX OTA Packet, which represents the bytes of an ETX OTA Packet except for the ones that it has at the Data field. <br /></td></tr>
<tr class="separator:ga72130675e27f87e7658d686a3144288b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c4e85eb3c2cf2c0f9712e4ccf08076d"><td class="memItemLeft" align="right" valign="top"><a id="ga4c4e85eb3c2cf2c0f9712e4ccf08076d" name="ga4c4e85eb3c2cf2c0f9712e4ccf08076d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ETX_OTA_PACKET_MAX_SIZE</b>&#160;&#160;&#160;(<a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga31ccfee7f30e5cac204d5402f215106a">ETX_OTA_DATA_MAX_SIZE</a> + <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga72130675e27f87e7658d686a3144288b">ETX_OTA_DATA_OVERHEAD</a>)</td></tr>
<tr class="memdesc:ga4c4e85eb3c2cf2c0f9712e4ccf08076d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total bytes in an ETX OTA Packet. <br /></td></tr>
<tr class="separator:ga4c4e85eb3c2cf2c0f9712e4ccf08076d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77f19ef270e35f247ef0a7453926ef17"><td class="memItemLeft" align="right" valign="top"><a id="ga77f19ef270e35f247ef0a7453926ef17" name="ga77f19ef270e35f247ef0a7453926ef17"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ETX_OTA_DATA_FIELD_INDEX</b>&#160;&#160;&#160;(<a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaca85b60c449ed7b2c22bfb341828859b">ETX_OTA_SOF_SIZE</a> + <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga9aec91cd2950f92b8e297cde915b1d73">ETX_OTA_PACKET_TYPE_SIZE</a> + <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga26d844eedae10927048ba28df31027aa">ETX_OTA_DATA_LENGTH_SIZE</a>)</td></tr>
<tr class="memdesc:ga77f19ef270e35f247ef0a7453926ef17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index position of where the Data field bytes of a ETX OTA Packet starts at. <br /></td></tr>
<tr class="separator:ga77f19ef270e35f247ef0a7453926ef17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1feb09458d4a250a743be2d9abecffe7"><td class="memItemLeft" align="right" valign="top"><a id="ga1feb09458d4a250a743be2d9abecffe7" name="ga1feb09458d4a250a743be2d9abecffe7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ETX_OTA_BL_FW_SIZE</b>&#160;&#160;&#160;(FLASH_PAGE_SIZE_IN_BYTES * ETX_BL_FLASH_PAGES_SIZE)</td></tr>
<tr class="memdesc:ga1feb09458d4a250a743be2d9abecffe7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum size allowable for a Bootloader Firmware Image to have. <br /></td></tr>
<tr class="separator:ga1feb09458d4a250a743be2d9abecffe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9327912ecc98beaf67c3b8dd5e6abb87"><td class="memItemLeft" align="right" valign="top"><a id="ga9327912ecc98beaf67c3b8dd5e6abb87" name="ga9327912ecc98beaf67c3b8dd5e6abb87"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ETX_OTA_APP_FW_SIZE</b>&#160;&#160;&#160;(FLASH_PAGE_SIZE_IN_BYTES * ETX_APP_FLASH_PAGES_SIZE)</td></tr>
<tr class="memdesc:ga9327912ecc98beaf67c3b8dd5e6abb87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum size allowable for an Application Firmware Image to have. <br /></td></tr>
<tr class="separator:ga9327912ecc98beaf67c3b8dd5e6abb87"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga87e920427dcf2cec9c4d8dd852e5fd9b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> { <br />
&#160;&#160;<a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga87e920427dcf2cec9c4d8dd852e5fd9ba8364d5ecc7294eae3b069f09af9c1373">ETX_OTA_EC_OK</a> = 0U
, <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga87e920427dcf2cec9c4d8dd852e5fd9ba8c01c2d3994e0329c9829281e49e75f5">ETX_OTA_EC_STOP</a> = 1U
, <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga87e920427dcf2cec9c4d8dd852e5fd9bad62d2085a4a14f06e47d834c272afcb8">ETX_OTA_EC_NR</a> = 2U
, <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga87e920427dcf2cec9c4d8dd852e5fd9baf864abe2b916a1a6c94f89afb3f4e8ee">ETX_OTA_EC_NA</a> = 3U
, <br />
&#160;&#160;<a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga87e920427dcf2cec9c4d8dd852e5fd9bac4d81e1c23f4db8f03d3a484a40f211e">ETX_OTA_EC_ERR</a> = 4U
<br />
 }</td></tr>
<tr class="memdesc:ga87e920427dcf2cec9c4d8dd852e5fd9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">ETX OTA Exception codes.  <a href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">More...</a><br /></td></tr>
<tr class="separator:ga87e920427dcf2cec9c4d8dd852e5fd9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58edd4e3b286229ad030c1c2f7af0a90"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga58edd4e3b286229ad030c1c2f7af0a90">ETX_OTA_hw_Protocol</a> { <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga58edd4e3b286229ad030c1c2f7af0a90a3fe3b42ef4b2b89bd9dce98ea74b4b91">ETX_OTA_hw_Protocol_UART</a> = 0U
, <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga58edd4e3b286229ad030c1c2f7af0a90a7851d6e9e63405ea1cd4ee59d2845dd1">ETX_OTA_hw_Protocol_BLE</a> = 1U
 }</td></tr>
<tr class="memdesc:ga58edd4e3b286229ad030c1c2f7af0a90"><td class="mdescLeft">&#160;</td><td class="mdescRight">ETX OTA Hardware Protocol definitions.  <a href="../../d8/d33/group__app__side__firmware__update.html#ga58edd4e3b286229ad030c1c2f7af0a90">More...</a><br /></td></tr>
<tr class="separator:ga58edd4e3b286229ad030c1c2f7af0a90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga517b9b57f7577c3040ab8830be50296d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga517b9b57f7577c3040ab8830be50296d">ETSM_is_read_flag</a> { <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga517b9b57f7577c3040ab8830be50296da773a94f0ebc4932a45d5583b6d1b7f10">ETSM_HAS_NOT_BEEN_READ</a> = 0U
, <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga517b9b57f7577c3040ab8830be50296da656f1abf8012c7ba7c3777e36c4e6a2e">ETSM_HAS_BEEN_READ</a> = 1U
 }</td></tr>
<tr class="memdesc:ga517b9b57f7577c3040ab8830be50296d"><td class="mdescLeft">&#160;</td><td class="mdescRight">ETX OTA Status Monitor's Is Read Flag field definitions.  <a href="../../d8/d33/group__app__side__firmware__update.html#ga517b9b57f7577c3040ab8830be50296d">More...</a><br /></td></tr>
<tr class="separator:ga517b9b57f7577c3040ab8830be50296d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0672978a92ce1172cf098a45454e29be"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga0672978a92ce1172cf098a45454e29be">ETX_OTA_State</a> { <br />
&#160;&#160;<a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga0672978a92ce1172cf098a45454e29bea6be881ee56ae34bd7d53314e5f793abe">ETX_OTA_STATE_IDLE</a> = 0U
, <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga0672978a92ce1172cf098a45454e29beae84fbc7c8bf245fb44883401296c866b">ETX_OTA_STATE_START</a> = 1U
, <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga0672978a92ce1172cf098a45454e29bea412044c49f823914da74943b0b114331">ETX_OTA_STATE_HEADER</a> = 2U
, <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga0672978a92ce1172cf098a45454e29beaf25675177d37f7c5e628a73abc5cf704">ETX_OTA_STATE_DATA</a> = 3U
, <br />
&#160;&#160;<a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga0672978a92ce1172cf098a45454e29bea9b78b35831c31597fcc167073c94f7c6">ETX_OTA_STATE_END</a> = 4U
<br />
 }</td></tr>
<tr class="memdesc:ga0672978a92ce1172cf098a45454e29be"><td class="mdescLeft">&#160;</td><td class="mdescRight">ETX OTA process states.  <a href="../../d8/d33/group__app__side__firmware__update.html#ga0672978a92ce1172cf098a45454e29be">More...</a><br /></td></tr>
<tr class="separator:ga0672978a92ce1172cf098a45454e29be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8e8167f08b64387b81e035b91437252b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga8e8167f08b64387b81e035b91437252b">ETX_OTA_Packet_t</a> { <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga8e8167f08b64387b81e035b91437252ba4c7dee1e03ac659c30be08f902b19f5a">ETX_OTA_PACKET_TYPE_CMD</a> = 0U
, <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga8e8167f08b64387b81e035b91437252ba5e87810e6fe913efcce32f05b84516df">ETX_OTA_PACKET_TYPE_DATA</a> = 1U
, <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga8e8167f08b64387b81e035b91437252baaea28b1bf46702161ad478ffd7c14fed">ETX_OTA_PACKET_TYPE_HEADER</a> = 2U
, <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga8e8167f08b64387b81e035b91437252ba79e5101dc5d041cc30d40460e40a2d86">ETX_OTA_PACKET_TYPE_RESPONSE</a> = 3U
 }</td></tr>
<tr class="memdesc:ga8e8167f08b64387b81e035b91437252b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packet Type definitions available in the ETX OTA Firmware Update process.  <a href="../../d8/d33/group__app__side__firmware__update.html#ga8e8167f08b64387b81e035b91437252b">More...</a><br /></td></tr>
<tr class="separator:ga8e8167f08b64387b81e035b91437252b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa38e21ae5bd255a96da1d0b8de7a0b0b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaa38e21ae5bd255a96da1d0b8de7a0b0b">ETX_OTA_Command</a> { <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ggaa38e21ae5bd255a96da1d0b8de7a0b0bacee17ea0fde4205cd3067802d6bd8a60">ETX_OTA_CMD_START</a> = 0U
, <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ggaa38e21ae5bd255a96da1d0b8de7a0b0bad65d3695c0fe5b3c9eb9465e7f787b05">ETX_OTA_CMD_END</a> = 1U
, <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ggaa38e21ae5bd255a96da1d0b8de7a0b0ba6b28f219e4549273b52909fc0f6f9fd6">ETX_OTA_CMD_ABORT</a> = 2U
 }</td></tr>
<tr class="memdesc:gaa38e21ae5bd255a96da1d0b8de7a0b0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">ETX OTA Commands definitions.  <a href="../../d8/d33/group__app__side__firmware__update.html#gaa38e21ae5bd255a96da1d0b8de7a0b0b">More...</a><br /></td></tr>
<tr class="separator:gaa38e21ae5bd255a96da1d0b8de7a0b0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad7cbd91ee6a20a2e08a84fbd9ad04a7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaad7cbd91ee6a20a2e08a84fbd9ad04a7">ETX_OTA_Payload_t</a> { <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ggaad7cbd91ee6a20a2e08a84fbd9ad04a7ab59e55b93321baa7ed58e09083f16d54">ETX_OTA_Application_Firmware_Image</a> = 0U
, <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ggaad7cbd91ee6a20a2e08a84fbd9ad04a7a66e228175189f98b6cfbf7b8a6a9f768">ETX_OTA_Bootloader_Firmware_Image</a> = 1U
 }</td></tr>
<tr class="memdesc:gaad7cbd91ee6a20a2e08a84fbd9ad04a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Payload Type definitions available in the ETX OTA Firmware Update process.  <a href="../../d8/d33/group__app__side__firmware__update.html#gaad7cbd91ee6a20a2e08a84fbd9ad04a7">More...</a><br /></td></tr>
<tr class="separator:gaad7cbd91ee6a20a2e08a84fbd9ad04a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4ec0148974094a07a73266170529c860"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga4ec0148974094a07a73266170529c860">ETX_OTA_Response_Status</a> { <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga4ec0148974094a07a73266170529c860a338c8efe2be82f9713bd26e048d60fa1">ETX_OTA_ACK</a> = 0U
, <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga4ec0148974094a07a73266170529c860ab3cc423ce571c4649819053952cc8ffb">ETX_OTA_NACK</a> = 1U
 }</td></tr>
<tr class="memdesc:ga4ec0148974094a07a73266170529c860"><td class="mdescLeft">&#160;</td><td class="mdescRight">Response Status definitions available in the ETX OTA Firmware Update process.  <a href="../../d8/d33/group__app__side__firmware__update.html#ga4ec0148974094a07a73266170529c860">More...</a><br /></td></tr>
<tr class="separator:ga4ec0148974094a07a73266170529c860"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8544487b6b161bad2598446b3a3f24ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga8544487b6b161bad2598446b3a3f24ba">firmware_image_download_and_install</a> ()</td></tr>
<tr class="memdesc:ga8544487b6b161bad2598446b3a3f24ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to receive and install an Application Firmware Image into our MCU/MPU.  <br /></td></tr>
<tr class="separator:ga8544487b6b161bad2598446b3a3f24ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae2775068969102a812b091763f46535b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gae2775068969102a812b091763f46535b">etx_ota_status_resp_handler</a> (<a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> etx_ota_status_code)</td></tr>
<tr class="memdesc:gae2775068969102a812b091763f46535b"><td class="mdescLeft">&#160;</td><td class="mdescRight">ETX OTA Status Response Callback.  <br /></td></tr>
<tr class="separator:gae2775068969102a812b091763f46535b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaed7c2117e5cf4f734a92fdac60b0de39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga517b9b57f7577c3040ab8830be50296d">ETSM_is_read_flag</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaed7c2117e5cf4f734a92fdac60b0de39">update_status_monitor</a> (<a class="el" href="../../d6/dbe/struct_e_t_x___o_t_a___status__monitor__t.html">ETX_OTA_Status_monitor_t</a> *status_monitor)</td></tr>
<tr class="memdesc:gaed7c2117e5cf4f734a92fdac60b0de39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the ETX OTA Status Monitor given by the implementer of the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html">Firmware Update module</a> with the one contained inside it.  <br /></td></tr>
<tr class="separator:gaed7c2117e5cf4f734a92fdac60b0de39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeb520f4a0bdd0fa519613a14953b1e53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaeb520f4a0bdd0fa519613a14953b1e53">init_firmware_update_module</a> (<a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga58edd4e3b286229ad030c1c2f7af0a90">ETX_OTA_hw_Protocol</a> hardware_protocol, UART_HandleTypeDef *huart, <a class="el" href="../../d7/d98/structfirmware__update__config__data__t.html">firmware_update_config_data_t</a> *<a class="el" href="../../d3/dab/group__main.html#ga3f3bdee18d4eed855a3fba7663c60b2d">fw_config</a>, <a class="el" href="../../db/d26/struct_g_p_i_o__def__t.html">GPIO_def_t</a> *GPIO_hm10_VCC, <a class="el" href="../../db/d26/struct_g_p_i_o__def__t.html">GPIO_def_t</a> *GPIO_is_hm10_default_settings, <a class="el" href="../../db/d26/struct_g_p_i_o__def__t.html">GPIO_def_t</a> *GPIO_hm10_state)</td></tr>
<tr class="memdesc:gaeb520f4a0bdd0fa519613a14953b1e53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html">Firmware Update module</a> in order to be able to use its provided functions.  <br /></td></tr>
<tr class="separator:gaeb520f4a0bdd0fa519613a14953b1e53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6fd40e197ded2c7322da95ee343aaa90"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga6fd40e197ded2c7322da95ee343aaa90">etx_ota_receive_packet</a> (uint8_t *buf, uint16_t max_len)</td></tr>
<tr class="memdesc:ga6fd40e197ded2c7322da95ee343aaa90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets one Packet from the ETX OTA process, if any is given.  <br /></td></tr>
<tr class="separator:ga6fd40e197ded2c7322da95ee343aaa90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga525b5a3f54281b670592bf72d0588497"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga525b5a3f54281b670592bf72d0588497">etx_ota_process_data</a> (uint8_t *buf)</td></tr>
<tr class="memdesc:ga525b5a3f54281b670592bf72d0588497"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes and validates the latest received ETX OTA Packet.  <br /></td></tr>
<tr class="separator:ga525b5a3f54281b670592bf72d0588497"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea3a6f6d3b3dc8a8620bb38ba6b6116a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaea3a6f6d3b3dc8a8620bb38ba6b6116a">etx_ota_send_resp</a> (<a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga4ec0148974094a07a73266170529c860">ETX_OTA_Response_Status</a> response_status)</td></tr>
<tr class="memdesc:gaea3a6f6d3b3dc8a8620bb38ba6b6116a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an ETX OTA Response Type Packet with a desired Response Status (i.e., ACK or NACK) to the host either via the UART or the BLE Hardware Protocol correspondingly.  <br /></td></tr>
<tr class="separator:gaea3a6f6d3b3dc8a8620bb38ba6b6116a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1decce64469d19cbae18d197ba568cc4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga1decce64469d19cbae18d197ba568cc4">write_data_to_ram</a> (uint8_t *data, uint16_t data_len, bool is_full_image)</td></tr>
<tr class="memdesc:ga1decce64469d19cbae18d197ba568cc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the contents of the "Data" field contained in a given ETX OTA Data Type Packet into the Flash Memory of our MCU/MPU's Application Firmware.  <br /></td></tr>
<tr class="separator:ga1decce64469d19cbae18d197ba568cc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga40532f22429bfc92c49206cb31f63b83"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga40532f22429bfc92c49206cb31f63b83">HAL_ret_handler</a> (HAL_StatusTypeDef HAL_status)</td></tr>
<tr class="memdesc:ga40532f22429bfc92c49206cb31f63b83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the corresponding <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> value depending on the given HAL_StatusTypeDef value.  <br /></td></tr>
<tr class="separator:ga40532f22429bfc92c49206cb31f63b83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae494a9643f29b87d6d81e5264e60e57b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gae494a9643f29b87d6d81e5264e60e57b">HAL_UART_RxCpltCallback</a> (UART_HandleTypeDef *huart)</td></tr>
<tr class="memdesc:gae494a9643f29b87d6d81e5264e60e57b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actions that are desired to be made whenever the non blocking mode, of the chosen Hardware Protocol, receives some data.  <br /></td></tr>
<tr class="separator:gae494a9643f29b87d6d81e5264e60e57b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga4106c5686d33b66271fa81ef9f4e2a0b"><td class="memItemLeft" align="right" valign="top"><a id="ga4106c5686d33b66271fa81ef9f4e2a0b" name="ga4106c5686d33b66271fa81ef9f4e2a0b"></a>
static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>Rx_Buffer</b> [<a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga4c4e85eb3c2cf2c0f9712e4ccf08076d">ETX_OTA_PACKET_MAX_SIZE</a>]</td></tr>
<tr class="memdesc:ga4106c5686d33b66271fa81ef9f4e2a0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global buffer that will be used by our MCU/MPU to hold the whole data of a received ETX OTA Packet from the host. <br /></td></tr>
<tr class="separator:ga4106c5686d33b66271fa81ef9f4e2a0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae7cf11864e2420d122c7d30c5f1d9d7c"><td class="memItemLeft" align="right" valign="top"><a id="gae7cf11864e2420d122c7d30c5f1d9d7c" name="gae7cf11864e2420d122c7d30c5f1d9d7c"></a>
static <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga0672978a92ce1172cf098a45454e29be">ETX_OTA_State</a>&#160;</td><td class="memItemRight" valign="bottom"><b>etx_ota_state</b> = <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga0672978a92ce1172cf098a45454e29bea6be881ee56ae34bd7d53314e5f793abe">ETX_OTA_STATE_IDLE</a></td></tr>
<tr class="memdesc:gae7cf11864e2420d122c7d30c5f1d9d7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variable used to hold the ETX OTA Process State at which our MCU/MPU is currently at. <br /></td></tr>
<tr class="separator:gae7cf11864e2420d122c7d30c5f1d9d7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03584b4669ea6f976d157d69d164aec9"><td class="memItemLeft" align="right" valign="top"><a id="ga03584b4669ea6f976d157d69d164aec9" name="ga03584b4669ea6f976d157d69d164aec9"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>etx_ota_fw_received_size</b> = 0</td></tr>
<tr class="memdesc:ga03584b4669ea6f976d157d69d164aec9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variable used to indicate the Total Size in bytes of the whole ETX OTA Payload that our MCU/MPU has received and written into the Flash Memory designated to the ETX OTA Protocol. <br /></td></tr>
<tr class="separator:ga03584b4669ea6f976d157d69d164aec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab263085410b1bab6cd6ad373dd960c58"><td class="memItemLeft" align="right" valign="top"><a id="gab263085410b1bab6cd6ad373dd960c58" name="gab263085410b1bab6cd6ad373dd960c58"></a>
static <a class="el" href="../../d6/dbe/struct_e_t_x___o_t_a___status__monitor__t.html">ETX_OTA_Status_monitor_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>etx_ota_status_monitor</b></td></tr>
<tr class="memdesc:gab263085410b1bab6cd6ad373dd960c58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global struct used to store the ETX OTA Status code that resulted from the latest ETX OTA Transaction. <br /></td></tr>
<tr class="separator:gab263085410b1bab6cd6ad373dd960c58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabfbf858f2fbc45c0c16aaac7c00bde48"><td class="memItemLeft" align="right" valign="top"><a id="gabfbf858f2fbc45c0c16aaac7c00bde48" name="gabfbf858f2fbc45c0c16aaac7c00bde48"></a>
static <a class="el" href="../../d7/d98/structfirmware__update__config__data__t.html">firmware_update_config_data_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>p_fw_config</b></td></tr>
<tr class="memdesc:gabfbf858f2fbc45c0c16aaac7c00bde48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global pointer to the latest data of the <a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a> sub-module. <br /></td></tr>
<tr class="separator:gabfbf858f2fbc45c0c16aaac7c00bde48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89654158a1ad435ead0c6985c85b1932"><td class="memItemLeft" align="right" valign="top"><a id="ga89654158a1ad435ead0c6985c85b1932" name="ga89654158a1ad435ead0c6985c85b1932"></a>
static UART_HandleTypeDef *&#160;</td><td class="memItemRight" valign="bottom"><b>p_huart</b></td></tr>
<tr class="memdesc:ga89654158a1ad435ead0c6985c85b1932"><td class="mdescLeft">&#160;</td><td class="mdescRight">Our MCU/MPU's Hardware Protocol UART Handle from which the ETX OTA Protocol will be used on. <br /></td></tr>
<tr class="separator:ga89654158a1ad435ead0c6985c85b1932"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga519a6ce9213c2c395c452d60f5ac8a83"><td class="memItemLeft" align="right" valign="top"><a id="ga519a6ce9213c2c395c452d60f5ac8a83" name="ga519a6ce9213c2c395c452d60f5ac8a83"></a>
static <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga58edd4e3b286229ad030c1c2f7af0a90">ETX_OTA_hw_Protocol</a>&#160;</td><td class="memItemRight" valign="bottom"><b>ETX_OTA_hardware_protocol</b></td></tr>
<tr class="memdesc:ga519a6ce9213c2c395c452d60f5ac8a83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hardware Protocol into which the ETX OTA Protocol will be used for sending/receiving data to/from the host. <br /></td></tr>
<tr class="separator:ga519a6ce9213c2c395c452d60f5ac8a83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad4490f105e5c3a9a7e31ec2ddcd040b5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../db/d26/struct_g_p_i_o__def__t.html">GPIO_def_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gad4490f105e5c3a9a7e31ec2ddcd040b5">p_GPIO_hm10_VCC</a> = NULL</td></tr>
<tr class="memdesc:gad4490f105e5c3a9a7e31ec2ddcd040b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the GPIO Definition Type of the GPIO Pin connected to the Transistor that connects or removes the Power Supply of the HM-10 Clone BLE Device Hardware.  <br /></td></tr>
<tr class="separator:gad4490f105e5c3a9a7e31ec2ddcd040b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga453bc9b09ccda4ced09f1330f8dd556d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../db/d26/struct_g_p_i_o__def__t.html">GPIO_def_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga453bc9b09ccda4ced09f1330f8dd556d">p_GPIO_is_hm10_default_settings</a> = NULL</td></tr>
<tr class="memdesc:ga453bc9b09ccda4ced09f1330f8dd556d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the GPIO Definition Type of the GPIO Pin from which it can be requested to reset the Configuration Settings of the HM-10 Clone BLE Device to its default settings.  <br /></td></tr>
<tr class="separator:ga453bc9b09ccda4ced09f1330f8dd556d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf9ec7c0a0f4eccee501d167970523bca"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../db/d26/struct_g_p_i_o__def__t.html">GPIO_def_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaf9ec7c0a0f4eccee501d167970523bca">p_GPIO_hm10_state</a> = NULL</td></tr>
<tr class="memdesc:gaf9ec7c0a0f4eccee501d167970523bca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the GPIO Definition Type of the GPIO Pin connected to the STATE Pin of the HM-10 Clone BLE Device Hardware.  <br /></td></tr>
<tr class="separator:gaf9ec7c0a0f4eccee501d167970523bca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This module provides the functions required to enable the application to be able to handle Firmware Update requests via ETX OTA Protocol and to install either a Bootloader or an Application Firmware Image in our MCU/MPU if requested by using a desired Hardware Protocol from our MCU/MPU's as a communication channel. </p>
<dl class="section note"><dt>Note</dt><dd>For more details on the available Hardware Protocol, see <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga58edd4e3b286229ad030c1c2f7af0a90">ETX_OTA_hw_Protocol</a> .</dd></dl>
<p>The ETX OTA process sends/receives data through Packets.</p>
<p>There 4 types of Packets: </p><ol>
<li>
Command Type Packets </li>
<li>
Header Type Packets </li>
<li>
Data Type Packets </li>
<li>
Response Type Packets </li>
</ol>
<p>where it is suggested to see <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga8e8167f08b64387b81e035b91437252b">ETX_OTA_Packet_t</a> for more details.</p>
<p>The General Data Format for all types of Packets is the following set of bytes: </p><ol>
<li>
Start of Frame (SOF): 1 byte </li>
<li>
Packet Type: 1 byte </li>
<li>
Data Length: 2 bytes </li>
<li>
Data: 1 up to 1024 bytes (size must be perfectly divisible by 4 bytes) </li>
<li>
CRC32: 4 bytes </li>
<li>
End of Frame (EOF): 1 byte </li>
</ol>
<p>but for finer details on the Data Format for each type of ETX OTA Packet, see <a class="el" href="../../d8/d25/struct_e_t_x___o_t_a___command___packet__t.html">ETX_OTA_Command_Packet_t</a> , <a class="el" href="../../d7/dd7/struct_e_t_x___o_t_a___header___packet__t.html">ETX_OTA_Header_Packet_t</a> , <a class="el" href="../../d2/d7c/struct_e_t_x___o_t_a___data___packet__t.html">ETX_OTA_Data_Packet_t</a> and <a class="el" href="../../de/dae/struct_e_t_x___o_t_a___response___packet__t.html">ETX_OTA_Response_Packet_t</a> .</p>
<p>On the other hand, the ETX OTA Protocol has 5 different states that indicate the part of the process at which we are located at with respect to a single Firmware Update process, which are given by the following in that order: </p><ol>
<li>
ETX OTA Idle State </li>
<li>
ETX OTA Start State </li>
<li>
ETX OTA Header State </li>
<li>
ETX OTA Data State </li>
<li>
ETX OTA End State </li>
</ol>
<p>where it is suggested to see <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga0672978a92ce1172cf098a45454e29be">ETX_OTA_State</a> for more details.</p>
<p>Finally, the way our MCU/MPU will interact with a host is that the host will send a single packet for each ETX OTA State, except maybe in the Data State since multiple packets are allowed there. Nonetheless, our MCU/MPU will expect the ETX OTA States to transition in the order previously shown and our MCU/MPU will also both validate the received data and, if it is successful on that, it will always respond back to the host with an ETX OTA Response Type Packet to let it know whether or not our MCU/MPU was able to successfully get and process the data of the each Packet by sending an ACK, or otherwise with a NACK.</p>
<dl class="section author"><dt>Author</dt><dd>Cesar Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd>
<dd>
EmbeTronicX (<a href="https://github.com/Embetronicx/STM32-Bootloader/tree/ETX_Bootloader_3.0">STM32-Bootloader GitHub Repository under ETX_Bootloader_3.0 branch</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>November 21, 2023. </dd></dl>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga31ccfee7f30e5cac204d5402f215106a" name="ga31ccfee7f30e5cac204d5402f215106a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga31ccfee7f30e5cac204d5402f215106a">&#9670;&#160;</a></span>ETX_OTA_DATA_MAX_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ETX_OTA_DATA_MAX_SIZE&#160;&#160;&#160;(1024U)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Designated maximum expected "Data" field's size in the General Data Format of an ETX OTA Packet. </p>
<dl class="section note"><dt>Note</dt><dd>This definition's value does not stand for the size of the entire ETX OTA Packet. Instead, it represents the size of the "Data" field that is inside the General Data Format of an ETX OTA Packet. </dd></dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga517b9b57f7577c3040ab8830be50296d" name="ga517b9b57f7577c3040ab8830be50296d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga517b9b57f7577c3040ab8830be50296d">&#9670;&#160;</a></span>ETSM_is_read_flag</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga517b9b57f7577c3040ab8830be50296d">ETSM_is_read_flag</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ETX OTA Status Monitor's Is Read Flag field definitions. </p>
<p>These definitions define the valid and possible values of the <a class="el" href="../../d6/dbe/struct_e_t_x___o_t_a___status__monitor__t.html#a497b7ad7c4429cd3eeca92291e5d311c">ETX_OTA_Status_monitor_t::has_ec_been_read_before</a> field. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga517b9b57f7577c3040ab8830be50296da773a94f0ebc4932a45d5583b6d1b7f10" name="gga517b9b57f7577c3040ab8830be50296da773a94f0ebc4932a45d5583b6d1b7f10"></a>ETSM_HAS_NOT_BEEN_READ&#160;</td><td class="fielddoc"><p>The latest ETX OTA Exception Code in a given <a class="el" href="../../d6/dbe/struct_e_t_x___o_t_a___status__monitor__t.html">ETX_OTA_Status_monitor_t</a> variable has a new value and has not been read yet. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga517b9b57f7577c3040ab8830be50296da656f1abf8012c7ba7c3777e36c4e6a2e" name="gga517b9b57f7577c3040ab8830be50296da656f1abf8012c7ba7c3777e36c4e6a2e"></a>ETSM_HAS_BEEN_READ&#160;</td><td class="fielddoc"><p>The latest ETX OTA Exception Code in a given <a class="el" href="../../d6/dbe/struct_e_t_x___o_t_a___status__monitor__t.html">ETX_OTA_Status_monitor_t</a> variable has already been read. </p>
</td></tr>
</table>

</div>
</div>
<a id="gaa38e21ae5bd255a96da1d0b8de7a0b0b" name="gaa38e21ae5bd255a96da1d0b8de7a0b0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa38e21ae5bd255a96da1d0b8de7a0b0b">&#9670;&#160;</a></span>ETX_OTA_Command</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaa38e21ae5bd255a96da1d0b8de7a0b0b">ETX_OTA_Command</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ETX OTA Commands definitions. </p>
<p>These are the different Commands that the host can request to our MCU/MPU whenever the host sends an ETX OTA Command Type Packet to that external device. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggaa38e21ae5bd255a96da1d0b8de7a0b0bacee17ea0fde4205cd3067802d6bd8a60" name="ggaa38e21ae5bd255a96da1d0b8de7a0b0bacee17ea0fde4205cd3067802d6bd8a60"></a>ETX_OTA_CMD_START&#160;</td><td class="fielddoc"><p>ETX OTA Firmware Update Start Command. </p>
<p>This command indicates to the MCU/MPU that the host is connected to (via COMPORT_NUMBER ) to start an ETX OTA Process. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaa38e21ae5bd255a96da1d0b8de7a0b0bad65d3695c0fe5b3c9eb9465e7f787b05" name="ggaa38e21ae5bd255a96da1d0b8de7a0b0bad65d3695c0fe5b3c9eb9465e7f787b05"></a>ETX_OTA_CMD_END&#160;</td><td class="fielddoc"><p>ETX OTA Firmware Update End command. </p>
<p>This command indicates to the MCU/MPU that the host is connected to (via COMPORT_NUMBER ) to end the current ETX OTA Process. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaa38e21ae5bd255a96da1d0b8de7a0b0ba6b28f219e4549273b52909fc0f6f9fd6" name="ggaa38e21ae5bd255a96da1d0b8de7a0b0ba6b28f219e4549273b52909fc0f6f9fd6"></a>ETX_OTA_CMD_ABORT&#160;</td><td class="fielddoc"><p>ETX OTA Abort Command. </p>
<p>This command is used by the host to request to our MCU/MPU to abort whatever ETX OTA Process that our MCU/MPU is working on. </p><dl class="section note"><dt>Note</dt><dd>Unlike the other Commands, this one can be legally requested to our MCU/MPU at any time and as many times as the host wants to. </dd></dl>
</td></tr>
</table>

</div>
</div>
<a id="ga58edd4e3b286229ad030c1c2f7af0a90" name="ga58edd4e3b286229ad030c1c2f7af0a90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga58edd4e3b286229ad030c1c2f7af0a90">&#9670;&#160;</a></span>ETX_OTA_hw_Protocol</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga58edd4e3b286229ad030c1c2f7af0a90">ETX_OTA_hw_Protocol</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ETX OTA Hardware Protocol definitions. </p>
<p>These definitions define the available ETX OTA <u>Hardware Protocols</u> that our MCU can use to establish a "physical" connection with a host machine, in which both ends will communicate with each other by using the ETX OTA <u>Software Protocol</u> for interpreting the data send/received on both sides. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga58edd4e3b286229ad030c1c2f7af0a90a3fe3b42ef4b2b89bd9dce98ea74b4b91" name="gga58edd4e3b286229ad030c1c2f7af0a90a3fe3b42ef4b2b89bd9dce98ea74b4b91"></a>ETX_OTA_hw_Protocol_UART&#160;</td><td class="fielddoc"><p>UART Hardware Protocol to be used for the ETX OTA Protocol. </p>
<p>The default expected UART configuration settings are 115'200 baud rate, 8 data-bits, no parity, 1 stop-bit and no Flow Control. However, these can be changed as long as these configurations are also changed on the host app, where it is indispensable that they match. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga58edd4e3b286229ad030c1c2f7af0a90a7851d6e9e63405ea1cd4ee59d2845dd1" name="gga58edd4e3b286229ad030c1c2f7af0a90a7851d6e9e63405ea1cd4ee59d2845dd1"></a>ETX_OTA_hw_Protocol_BLE&#160;</td><td class="fielddoc"><p>BLE Hardware Protocol to be used for the ETX OTA Protocol. </p>
<p>The expected BLE module for our MCU to use is the HM-10 Clone BLE Device via the <a class="el" href="../../df/d51/group__hm10__ble__clone.html">HM-10 CTFZ54812 ZS-040 Bluetooth Clone module</a> , which our MCU communicates with via UART under the default expected configuration settings of 9600 baud rate, 8 data-bits, no parity, 1 stop-bit and no Flow Control. However, these can be changed as long as these configurations are also changed on the HM-10 Clone BLE Device, where it is indispensable that they match. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga8e8167f08b64387b81e035b91437252b" name="ga8e8167f08b64387b81e035b91437252b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8e8167f08b64387b81e035b91437252b">&#9670;&#160;</a></span>ETX_OTA_Packet_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga8e8167f08b64387b81e035b91437252b">ETX_OTA_Packet_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Packet Type definitions available in the ETX OTA Firmware Update process. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga8e8167f08b64387b81e035b91437252ba4c7dee1e03ac659c30be08f902b19f5a" name="gga8e8167f08b64387b81e035b91437252ba4c7dee1e03ac659c30be08f902b19f5a"></a>ETX_OTA_PACKET_TYPE_CMD&#160;</td><td class="fielddoc"><p>ETX OTA Command Type Packet. </p>
<p>This Packet Type is expected to be send by the host to our MCU/MPU to request a certain ETX OTA Command to our MCU/MPU (see <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaa38e21ae5bd255a96da1d0b8de7a0b0b">ETX_OTA_Command</a> ). </p>
</td></tr>
<tr><td class="fieldname"><a id="gga8e8167f08b64387b81e035b91437252ba5e87810e6fe913efcce32f05b84516df" name="gga8e8167f08b64387b81e035b91437252ba5e87810e6fe913efcce32f05b84516df"></a>ETX_OTA_PACKET_TYPE_DATA&#160;</td><td class="fielddoc"><p>ETX OTA Data Type Packet. </p>
<p>This Packet Type will contain either the full or a part/chunk of a Firmware Image being send from the host to our MCU/MPU. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga8e8167f08b64387b81e035b91437252baaea28b1bf46702161ad478ffd7c14fed" name="gga8e8167f08b64387b81e035b91437252baaea28b1bf46702161ad478ffd7c14fed"></a>ETX_OTA_PACKET_TYPE_HEADER&#160;</td><td class="fielddoc"><p>ETX OTA Header Type Packet. </p>
<p>This Packet Type will provide the size in bytes of the Firmware Image that our MCU/MPU will receive, its recorded 32-bits CRC and the sub-type of the ETX OTA Data Type Packets to be received (i.e., <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaad7cbd91ee6a20a2e08a84fbd9ad04a7">ETX_OTA_Payload_t</a> ). </p>
</td></tr>
<tr><td class="fieldname"><a id="gga8e8167f08b64387b81e035b91437252ba79e5101dc5d041cc30d40460e40a2d86" name="gga8e8167f08b64387b81e035b91437252ba79e5101dc5d041cc30d40460e40a2d86"></a>ETX_OTA_PACKET_TYPE_RESPONSE&#160;</td><td class="fielddoc"><p>ETX OTA Response Type Packet. </p>
<p>This Packet Type contains a response from our MCU/MPU that is given to the host to indicate to it whether or not our MCU/MPU was able to successfully process the latest request or Packet from the host. </p>
</td></tr>
</table>

</div>
</div>
<a id="gaad7cbd91ee6a20a2e08a84fbd9ad04a7" name="gaad7cbd91ee6a20a2e08a84fbd9ad04a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaad7cbd91ee6a20a2e08a84fbd9ad04a7">&#9670;&#160;</a></span>ETX_OTA_Payload_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaad7cbd91ee6a20a2e08a84fbd9ad04a7">ETX_OTA_Payload_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Payload Type definitions available in the ETX OTA Firmware Update process. </p>
<p>Whenever the host sends to our MCU/MPU a <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga8e8167f08b64387b81e035b91437252ba5e87810e6fe913efcce32f05b84516df">ETX_OTA_PACKET_TYPE_DATA</a> Packet Type (i.e., a Data Type Packet), there are several possible sub-types for this and any other Data Type Packet that indicate the type of data that our MCU/MPU should expect to receive from the whole Data Type Packets that it will receive. These sub-types are given by <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaad7cbd91ee6a20a2e08a84fbd9ad04a7">ETX_OTA_Payload_t</a> . </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggaad7cbd91ee6a20a2e08a84fbd9ad04a7ab59e55b93321baa7ed58e09083f16d54" name="ggaad7cbd91ee6a20a2e08a84fbd9ad04a7ab59e55b93321baa7ed58e09083f16d54"></a>ETX_OTA_Application_Firmware_Image&#160;</td><td class="fielddoc"><p>ETX OTA Application Firmware Image Data Packet Type. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaad7cbd91ee6a20a2e08a84fbd9ad04a7a66e228175189f98b6cfbf7b8a6a9f768" name="ggaad7cbd91ee6a20a2e08a84fbd9ad04a7a66e228175189f98b6cfbf7b8a6a9f768"></a>ETX_OTA_Bootloader_Firmware_Image&#160;</td><td class="fielddoc"><p>ETX OTA Bootloader Firmware Image Data Packet Type. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga4ec0148974094a07a73266170529c860" name="ga4ec0148974094a07a73266170529c860"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4ec0148974094a07a73266170529c860">&#9670;&#160;</a></span>ETX_OTA_Response_Status</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga4ec0148974094a07a73266170529c860">ETX_OTA_Response_Status</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Response Status definitions available in the ETX OTA Firmware Update process. </p>
<p>Whenever the host sends to our MCU/MPU a Packet, depending on whether our MCU/MPU was able to successfully process the data of that Packet of not, our MCU/MPU will respond back to the host with a Response Type Packet containing the value of a Response Status correspondingly. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga4ec0148974094a07a73266170529c860a338c8efe2be82f9713bd26e048d60fa1" name="gga4ec0148974094a07a73266170529c860a338c8efe2be82f9713bd26e048d60fa1"></a>ETX_OTA_ACK&#160;</td><td class="fielddoc"><p>Acknowledge (ACK) data byte used in an ETX OTA Response Type Packet to indicate to the host that the latest ETX OTA Packet has been processed successfully by our MCU/MPU. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga4ec0148974094a07a73266170529c860ab3cc423ce571c4649819053952cc8ffb" name="gga4ec0148974094a07a73266170529c860ab3cc423ce571c4649819053952cc8ffb"></a>ETX_OTA_NACK&#160;</td><td class="fielddoc"><p>Not Acknowledge (NACK) data byte used in an ETX OTA Response Type Packet to indicate to the host that the latest ETX OTA Packet has not been processed successfully by our MCU/MPU. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga0672978a92ce1172cf098a45454e29be" name="ga0672978a92ce1172cf098a45454e29be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0672978a92ce1172cf098a45454e29be">&#9670;&#160;</a></span>ETX_OTA_State</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga0672978a92ce1172cf098a45454e29be">ETX_OTA_State</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ETX OTA process states. </p>
<p>The ETX OTA process states are used in the functions of the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html">Firmware Update module</a> module to either indicate or identify in what part of the whole ETX OTA process is our MCU/MPU currently at.</p>
<p>The ETX OTA process consists of several sub-processes or states that must be given place in the following orderly fashion: </p><ol>
<li>
Idle State </li>
<li>
Start State </li>
<li>
Header State </li>
<li>
Data State </li>
<li>
End State </li>
</ol>
<dl class="section note"><dt>Note</dt><dd>If the ETX OTA process gives place in a different order as shown above (e.g., Idle State --&gt; Start State --&gt; Data State ..., where instead, the order of the states expected were Idle State --&gt; Start State --&gt; Header State ...), then the ETX OTA process will be terminated with the corresponding <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> Exception code. </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga0672978a92ce1172cf098a45454e29bea6be881ee56ae34bd7d53314e5f793abe" name="gga0672978a92ce1172cf098a45454e29bea6be881ee56ae34bd7d53314e5f793abe"></a>ETX_OTA_STATE_IDLE&#160;</td><td class="fielddoc"><p>ETX OTA Idle State. </p>
<p>This state stands for when our MCU/MPU is not in a ETX OTA Firmware Update. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga0672978a92ce1172cf098a45454e29beae84fbc7c8bf245fb44883401296c866b" name="gga0672978a92ce1172cf098a45454e29beae84fbc7c8bf245fb44883401296c866b"></a>ETX_OTA_STATE_START&#160;</td><td class="fielddoc"><p>ETX OTA Start State. </p>
<p>This state gives place when our MCU/MPU receives a Command Type Packet from the host right after leaving the ETX OTA Idle State. Our MCU/MPU will expect that Packet to contain the Start Command so that our MCU/MPU starts an ETX OTA Firmware Update. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga0672978a92ce1172cf098a45454e29bea412044c49f823914da74943b0b114331" name="gga0672978a92ce1172cf098a45454e29bea412044c49f823914da74943b0b114331"></a>ETX_OTA_STATE_HEADER&#160;</td><td class="fielddoc"><p>ETX OTA Header State. </p>
<p>This state starts right after the Command Type Packet of the ETX OTA Start State is processed. In the ETX OTA Header State, our MCU/MPU will expect to receive a Header Type Packet in which our MCU/MPU will obtain the size in bytes of the Firmware Image to be received, its recorded 32-bits CRC and the sub-type of the ETX OTA Data Type Packets to be received (i.e., <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaad7cbd91ee6a20a2e08a84fbd9ad04a7">ETX_OTA_Payload_t</a> ). </p>
</td></tr>
<tr><td class="fieldname"><a id="gga0672978a92ce1172cf098a45454e29beaf25675177d37f7c5e628a73abc5cf704" name="gga0672978a92ce1172cf098a45454e29beaf25675177d37f7c5e628a73abc5cf704"></a>ETX_OTA_STATE_DATA&#160;</td><td class="fielddoc"><p>ETX OTA Data State. </p>
<p>This state starts right after the Header Type Packet of the ETX OTA Header State is processed. In the ETX OTA Data State, our MCU/MPU will expect to receive one or more Data Type Packets from which our MCU/MPU will receive a Firmware Image from the host. It is also in this State where our MCU/MPU will apply that Firmware Image to itself. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga0672978a92ce1172cf098a45454e29bea9b78b35831c31597fcc167073c94f7c6" name="gga0672978a92ce1172cf098a45454e29bea9b78b35831c31597fcc167073c94f7c6"></a>ETX_OTA_STATE_END&#160;</td><td class="fielddoc"><p>ETX OTA End State. </p>
<p>This state starts right after the Data Type Packet(s) of the ETX OTA Data State is/are processed. In the ETX OTA End State, our MCU/MPU will expect to receive a Command Type Packet containing the End Command so that our MCU/MPU confirms the conclusion of the ETX OTA Firmware Update. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga87e920427dcf2cec9c4d8dd852e5fd9b" name="ga87e920427dcf2cec9c4d8dd852e5fd9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87e920427dcf2cec9c4d8dd852e5fd9b">&#9670;&#160;</a></span>ETX_OTA_Status</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ETX OTA Exception codes. </p>
<p>These Exception Codes are returned by the functions of the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html">Firmware Update module</a> module to indicate the resulting status of having executed the process contained in each of those functions. For example, to indicate that the process executed by a certain function was successful or that it has failed. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga87e920427dcf2cec9c4d8dd852e5fd9ba8364d5ecc7294eae3b069f09af9c1373" name="gga87e920427dcf2cec9c4d8dd852e5fd9ba8364d5ecc7294eae3b069f09af9c1373"></a>ETX_OTA_EC_OK&#160;</td><td class="fielddoc"><p>ETX OTA Protocol was successful. </p>
<dl class="section note"><dt>Note</dt><dd>The code from the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga40532f22429bfc92c49206cb31f63b83">HAL_ret_handler</a> function contemplates that this value will match the one given for <code>HAL_OK</code> from HAL_StatusTypeDef . </dd></dl>
</td></tr>
<tr><td class="fieldname"><a id="gga87e920427dcf2cec9c4d8dd852e5fd9ba8c01c2d3994e0329c9829281e49e75f5" name="gga87e920427dcf2cec9c4d8dd852e5fd9ba8c01c2d3994e0329c9829281e49e75f5"></a>ETX_OTA_EC_STOP&#160;</td><td class="fielddoc"><p>ETX OTA Protocol has been stopped. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga87e920427dcf2cec9c4d8dd852e5fd9bad62d2085a4a14f06e47d834c272afcb8" name="gga87e920427dcf2cec9c4d8dd852e5fd9bad62d2085a4a14f06e47d834c272afcb8"></a>ETX_OTA_EC_NR&#160;</td><td class="fielddoc"><p>ETX OTA Protocol has concluded with no response from Host. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga87e920427dcf2cec9c4d8dd852e5fd9baf864abe2b916a1a6c94f89afb3f4e8ee" name="gga87e920427dcf2cec9c4d8dd852e5fd9baf864abe2b916a1a6c94f89afb3f4e8ee"></a>ETX_OTA_EC_NA&#160;</td><td class="fielddoc"><p>ETX OTA Payload received or to be received Not Applicable. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga87e920427dcf2cec9c4d8dd852e5fd9bac4d81e1c23f4db8f03d3a484a40f211e" name="gga87e920427dcf2cec9c4d8dd852e5fd9bac4d81e1c23f4db8f03d3a484a40f211e"></a>ETX_OTA_EC_ERR&#160;</td><td class="fielddoc"><p>ETX OTA Protocol has failed. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga525b5a3f54281b670592bf72d0588497" name="ga525b5a3f54281b670592bf72d0588497"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga525b5a3f54281b670592bf72d0588497">&#9670;&#160;</a></span>etx_ota_process_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> etx_ota_process_data </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Processes and validates the latest received ETX OTA Packet. </p>
<p>This function will read the current value of the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gae7cf11864e2420d122c7d30c5f1d9d7c">etx_ota_state</a> global variable to determine at which ETX OTA State the process is currently at in order to process the latest ETX OTA Packet correspondingly. In addition, this function will modify the value of that variable to the next ETX OTA State whenever it corresponds.</p>
<p>In addition, this function will do the following depending on the current ETX OTA State: </p><ul>
<li>
<b>ETX OTA Idle State:</b> Do nothing. </li>
<li>
<b>ETX OTA Start State:</b> Validate the latest ETX OTA Packet to be that of an ETX OTA Command Type Packet containing the Start Command in it and, if successful, then change current ETX OTA State to ETX OTA Header State. </li>
<li>
<b>ETX OTA Header State:</b> Validate the latest ETX OTA Packet to be that of an ETX OTA Header Type Packet and, if successful, then validate the incoming Firmware Image to be that of an Application Firmware Image. If successful, then write that data into the <a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a> sub-module. If everything goes well up to this point, then change the current ETX OTA State to ETX OTA Data State. </li>
<li>
<b>ETX OTA Data State:</b> Validate the latest ETX OTA Packet to be that of an ETX OTA Data Type Packet and, if successful, then write the contents of the "Data" field of that Packet into the corresponding Flash Memory location address of our MCU/MPU's Application Firmware. Repeat this explained process for all the ETX OTA Data Type Packets to be received by our MCU/MPU. After the last ETX OTA Data Packet has been successfully, change the current ETX OTA State to ETX OTA End State. </li>
<li>
<b>ETX OTA End State:</b> Validate the latest ETX OTA Packet to be that of an ETX OTA Command Type Packet containing the End Command in it and, if successful, then validate the CRC of the Application Firmware Image that has just been installed. If this is successful, then change the current ETX OTA State to ETX OTA Idle State. </li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Each time the implementer/programmer calls this function, the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga6fd40e197ded2c7322da95ee343aaa90">etx_ota_receive_packet</a> function must to be called once before this <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga525b5a3f54281b670592bf72d0588497">etx_ota_process_data</a> function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Buffer pointer to the data of the latest ETX OTA Packet.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ETX_OTA_EC_OK</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_STOP</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_NR</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_NA</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_ERR</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>EmbeTronicX (<a href="https://github.com/Embetronicx/STM32-Bootloader/tree/ETX_Bootloader_3.0">STM32-Bootloader GitHub Repository under ETX_Bootloader_3.0 branch</a>) </dd>
<dd>
César Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>October 02, 2023. </dd></dl>
<p><b>Local pointer cmd:</b> Points to the data of the latest ETX OTA Packet but in <a class="el" href="../../d8/d25/struct_e_t_x___o_t_a___command___packet__t.html">ETX_OTA_Command_Packet_t</a> type.</p>
<p><b>Local pointer header:</b> Points to the data of the latest ETX OTA Packet but in <a class="el" href="../../d7/dd7/struct_e_t_x___o_t_a___header___packet__t.html">ETX_OTA_Header_Packet_t</a> type.</p>
<p><b>Local variable header_ret:</b> Return value of a <a class="el" href="../../d7/d86/group__firmware__update__config.html#ga3c090c80e3e49b7cdeff014206874cbf">FirmUpdConf_Status</a> function function type.</p>
<p><b>Local pointer data:</b> Points to the data of the latest ETX OTA Packet but in <a class="el" href="../../d2/d7c/struct_e_t_x___o_t_a___data___packet__t.html">ETX_OTA_Data_Packet_t</a> type.</p>
<p><b>Local variable data_ret:</b> Return value of a <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> function.</p>
<p><b>Local variable cal_crc:</b> Value holder for the calculated 32-bit CRC of the Application Firmware Image that has just been installed into our MCU/MPU.</p>

</div>
</div>
<a id="ga6fd40e197ded2c7322da95ee343aaa90" name="ga6fd40e197ded2c7322da95ee343aaa90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6fd40e197ded2c7322da95ee343aaa90">&#9670;&#160;</a></span>etx_ota_receive_packet()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> etx_ota_receive_packet </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>max_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets one Packet from the ETX OTA process, if any is given. </p>
<p>The General Data Format that is expected to be received is as explained in the Doxygen documentation of the <a class="el" href="../../d2/d7c/struct_e_t_x___o_t_a___data___packet__t.html">ETX_OTA_Data_Packet_t</a> parameters structure, which starts with a SOF byte that is followed up with the Packet Type field, the Data Length field, the Data field, the CRC32 field and ends up with an EOF byte.</p>
<dl class="section note"><dt>Note</dt><dd>The HAL Timeout for each reception of data is given by ETX_CUSTOM_HAL_TIMEOUT .</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buf</td><td>Buffer pointer into which the bytes of the received packet from the host, will be stored. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">max_len</td><td>Maximum length of bytes that are expected to be received from the "Data" field of the next ETX OTA packet.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ETX_OTA_EC_OK</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_NR</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_ERR</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>EmbeTronicX (<a href="https://github.com/Embetronicx/STM32-Bootloader/tree/ETX_Bootloader_3.0">STM32-Bootloader GitHub Repository under ETX_Bootloader_3.0 branch</a>) </dd>
<dd>
César Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>October 01, 2023. </dd></dl>
<p><b>Local variable ret:</b> Used to hold the exception code value returned by either a <a class="el" href="../../d7/d86/group__firmware__update__config.html#ga3c090c80e3e49b7cdeff014206874cbf">FirmUpdConf_Status</a> , a <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> or a <a class="el" href="../../df/d51/group__hm10__ble__clone.html#gadc2c5644e3cbd6460a47f10b2f6b06a4">HM10_Clone_Status</a> function type.</p>
<p><b>Local variable len:</b> Current index against which the bytes of the current ETX OTA Packet have been fetched.</p>
<p><b>Local variable data_len:</b> "Data Length" field value of the ETX OTA Packet that is currently being received via the chosen Hardware Protocol.</p>
<p>The value of this field should stand for the length in bytes of the current ETX OTA Packet's "Data" field.</p>
<p><b>Local variable cal_data_crc:</b> Our MCU/MPU's calculated CRC of the ETX OTA Packet received via the chosen Hardware Protocol.</p>
<p><b>Local variable rec_data_crc:</b> Value holder of the "Recorded CRC" contained in the ETX OTA Packet received via the chosen Hardware Protocol.</p>

</div>
</div>
<a id="gaea3a6f6d3b3dc8a8620bb38ba6b6116a" name="gaea3a6f6d3b3dc8a8620bb38ba6b6116a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaea3a6f6d3b3dc8a8620bb38ba6b6116a">&#9670;&#160;</a></span>etx_ota_send_resp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> etx_ota_send_resp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga4ec0148974094a07a73266170529c860">ETX_OTA_Response_Status</a>&#160;</td>
          <td class="paramname"><em>response_status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an ETX OTA Response Type Packet with a desired Response Status (i.e., ACK or NACK) to the host either via the UART or the BLE Hardware Protocol correspondingly. </p>
<dl class="section note"><dt>Note</dt><dd>This function decides on sending the data on a certain Hardware Protocol according to the current value of <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga519a6ce9213c2c395c452d60f5ac8a83">ETX_OTA_hardware_protocol</a> , which should be set only via the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaeb520f4a0bdd0fa519613a14953b1e53">init_firmware_update_module</a> function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">response_status</td><td><code>ETX_OTA_ACK</code> or <code>ETX_OTA_NACK</code> .</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ETX_OTA_EC_OK</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_NR</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_ERR</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>EmbeTronicX (<a href="https://github.com/Embetronicx/STM32-Bootloader/tree/ETX_Bootloader_3.0">STM32-Bootloader GitHub Repository under ETX_Bootloader_3.0 branch</a>) </dd>
<dd>
César Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>October 30, 2023. </dd></dl>
<p><b>Local variable ret:</b> Return value of a <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> function function type.</p>

</div>
</div>
<a id="gae2775068969102a812b091763f46535b" name="gae2775068969102a812b091763f46535b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae2775068969102a812b091763f46535b">&#9670;&#160;</a></span>etx_ota_status_resp_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void etx_ota_status_resp_handler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a>&#160;</td>
          <td class="paramname"><em>etx_ota_status_code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ETX OTA Status Response Callback. </p>
<p>This function is called by the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html">Firmware Update module</a> each time an ETX OTA Transaction has been completed, so that the implementer of <a class="el" href="../../d8/d33/group__app__side__firmware__update.html">Firmware Update module</a> can customize handling the resulting ETX OTA Status Exception Code.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">etx_ota_status_code</td><td>Resulting ETX OTA Status Exception Code of the ETX OTA Transaction that has just been completed, where the only possible values that can be given are the following:<br  />
<ul>
<li><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga87e920427dcf2cec9c4d8dd852e5fd9ba8364d5ecc7294eae3b069f09af9c1373">ETX_OTA_Status::ETX_OTA_EC_OK</a></li>
<li><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga87e920427dcf2cec9c4d8dd852e5fd9ba8c01c2d3994e0329c9829281e49e75f5">ETX_OTA_Status::ETX_OTA_EC_STOP</a></li>
<li><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga87e920427dcf2cec9c4d8dd852e5fd9bad62d2085a4a14f06e47d834c272afcb8">ETX_OTA_Status::ETX_OTA_EC_NR</a></li>
<li><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga87e920427dcf2cec9c4d8dd852e5fd9baf864abe2b916a1a6c94f89afb3f4e8ee">ETX_OTA_Status::ETX_OTA_EC_NA</a></li>
<li><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga87e920427dcf2cec9c4d8dd852e5fd9bac4d81e1c23f4db8f03d3a484a40f211e">ETX_OTA_Status::ETX_OTA_EC_ERR</a></li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Remember to call HAL_NVIC_SystemReset whenever the <code>etx_ota_status_code</code> param equals <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga87e920427dcf2cec9c4d8dd852e5fd9bad62d2085a4a14f06e47d834c272afcb8">ETX_OTA_Status::ETX_OTA_EC_NR</a> to allow our MCU/MPU to load into its Bootloader Firmware again in order to try again in receiving the given ETX OTA Firmware Update Request there, since only the Bootloader Firmware can manage those requests.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>César Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>November 21, 2023. </dd></dl>

</div>
</div>
<a id="ga8544487b6b161bad2598446b3a3f24ba" name="ga8544487b6b161bad2598446b3a3f24ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8544487b6b161bad2598446b3a3f24ba">&#9670;&#160;</a></span>firmware_image_download_and_install()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> firmware_image_download_and_install </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempts to receive and install an Application Firmware Image into our MCU/MPU. </p>
<p>The Application Firmware Image is expected to be received from a certain host via the initialized Hardware Protocol (see <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaeb520f4a0bdd0fa519613a14953b1e53">init_firmware_update_module</a> function) and by using the ETX OTA Communication Protocol.</p>
<dl class="section note"><dt>Note</dt><dd>For more details on how the ETX OTA Protocol works, see the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html">Firmware Update module</a> module. </dd>
<dd>
This function expects that the <a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a> has already been initialized via the <a class="el" href="../../d7/d86/group__firmware__update__config.html#gab021a0e06bed18957df92a4d4c17853e">firmware_update_configurations_init</a> function.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ETX_OTA_EC_OK</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_STOP</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_NR</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_NA</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_ERR</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>César Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd>
<dd>
EmbeTronicX (<a href="https://github.com/Embetronicx/STM32-Bootloader/tree/ETX_Bootloader_3.0">STM32-Bootloader GitHub Repository under ETX_Bootloader_3.0 branch</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>November 14, 2023. </dd></dl>
<p><b>Local variable ret:</b> Used to hold the exception code value returned by a <a class="el" href="../../d7/d86/group__firmware__update__config.html#ga3c090c80e3e49b7cdeff014206874cbf">FirmUpdConf_Status</a> or a <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> function type.</p>

</div>
</div>
<a id="ga40532f22429bfc92c49206cb31f63b83" name="ga40532f22429bfc92c49206cb31f63b83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga40532f22429bfc92c49206cb31f63b83">&#9670;&#160;</a></span>HAL_ret_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> HAL_ret_handler </td>
          <td>(</td>
          <td class="paramtype">HAL_StatusTypeDef&#160;</td>
          <td class="paramname"><em>HAL_status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the corresponding <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> value depending on the given HAL_StatusTypeDef value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">HAL_status</td><td>HAL Status value (see HAL_StatusTypeDef ) that wants to be converted into its equivalent of a <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ETX_OTA_EC_NR</td><td>if <code>HAL_status</code> param equals <code>HAL_BUSY</code> or <code>ETX_CUSTOM_HAL_TIMEOUT</code> . </td></tr>
    <tr><td class="paramname">ETX_OTA_EC_ERR</td><td>if <code>HAL_status</code> param equals <code>HAL_ERROR</code> . </td></tr>
    <tr><td class="paramname">HAL_status</td><td>param otherwise.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>For more details on the returned values listed, see <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> and HAL_StatusTypeDef .</dd></dl>
<dl class="section author"><dt>Author</dt><dd>César Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>September 26, 2023. </dd></dl>

</div>
</div>
<a id="gae494a9643f29b87d6d81e5264e60e57b" name="gae494a9643f29b87d6d81e5264e60e57b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae494a9643f29b87d6d81e5264e60e57b">&#9670;&#160;</a></span>HAL_UART_RxCpltCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HAL_UART_RxCpltCallback </td>
          <td>(</td>
          <td class="paramtype">UART_HandleTypeDef *&#160;</td>
          <td class="paramname"><em>huart</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Actions that are desired to be made whenever the non blocking mode, of the chosen Hardware Protocol, receives some data. </p>
<dl class="section note"><dt>Note</dt><dd>See the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gaeb520f4a0bdd0fa519613a14953b1e53">init_firmware_update_module</a> function to learn more details about the non blocking mode used in the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html">Firmware Update module</a> .</dd></dl>
<p>Regardless of the Hardware Protocol chosen, this function will indefinitely request to receive a byte of data from the chosen Hardware Protocol until it receives the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga578ab5347ebf2677f563566c7452dfa1">ETX_OTA_SOF</a> byte. After that, it will call the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga8544487b6b161bad2598446b3a3f24ba">firmware_image_download_and_install</a> function in order to receive the ETX OTA Transaction that should have started to give place by then.</p>
<dl class="section author"><dt>Author</dt><dd>César Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>November 21, 2023. </dd></dl>
<p><b>Local variable ret:</b> Used to hold the exception code value returned by a <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> function type.</p>

</div>
</div>
<a id="gaeb520f4a0bdd0fa519613a14953b1e53" name="gaeb520f4a0bdd0fa519613a14953b1e53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeb520f4a0bdd0fa519613a14953b1e53">&#9670;&#160;</a></span>init_firmware_update_module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> init_firmware_update_module </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga58edd4e3b286229ad030c1c2f7af0a90">ETX_OTA_hw_Protocol</a>&#160;</td>
          <td class="paramname"><em>hardware_protocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UART_HandleTypeDef *&#160;</td>
          <td class="paramname"><em>huart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d98/structfirmware__update__config__data__t.html">firmware_update_config_data_t</a> *&#160;</td>
          <td class="paramname"><em>fw_config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d26/struct_g_p_i_o__def__t.html">GPIO_def_t</a> *&#160;</td>
          <td class="paramname"><em>GPIO_hm10_VCC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d26/struct_g_p_i_o__def__t.html">GPIO_def_t</a> *&#160;</td>
          <td class="paramname"><em>GPIO_is_hm10_default_settings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d26/struct_g_p_i_o__def__t.html">GPIO_def_t</a> *&#160;</td>
          <td class="paramname"><em>GPIO_hm10_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html">Firmware Update module</a> in order to be able to use its provided functions. </p>
<p>This function will update several of its Global Static Pointers and Variables that are used in the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html">Firmware Update module</a> and will then validate the requested Hardware Protocol into which it is desired to apply the ETX OTA Protocol.</p>
<dl class="section note"><dt>Note</dt><dd>This function updates the following Global Static Pointers and variables:<br  />
<ul>
<li>The <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga519a6ce9213c2c395c452d60f5ac8a83">ETX_OTA_hardware_protocol</a> Global Static Variable with the value of the <code>hardware_protocol</code> param.</li>
<li>The <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga89654158a1ad435ead0c6985c85b1932">p_huart</a> Global Static Pointer to point to the address towards which the <code>huart</code> param points.</li>
<li>The <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gabfbf858f2fbc45c0c16aaac7c00bde48">p_fw_config</a> Global Static Pointer to point to the address towards which the <code>fw_config</code> param points.</li>
<li>The p_GPIO_is_hm10_default_settings_Pin Global Static Pointer to point to the address towards which the <code>GPIO_is_hm10_default_settings_Pin</code> param points.</li>
<li>The p_GPIO_hm10_state_Pin Global Static Pointer to point to the address towards which the <code>GPIO_hm10_state_Pin</code> param points.</li>
<li><p class="startli">The <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gab263085410b1bab6cd6ad373dd960c58">etx_ota_status_monitor</a> Global Struct will have its <a class="el" href="../../d6/dbe/struct_e_t_x___o_t_a___status__monitor__t.html#a8729c99fc0c28bc62803e2e53112ebf8">ETX_OTA_Status_monitor_t::exception_code</a> and <a class="el" href="../../d6/dbe/struct_e_t_x___o_t_a___status__monitor__t.html#a497b7ad7c4429cd3eeca92291e5d311c">ETX_OTA_Status_monitor_t::has_ec_been_read_before</a> field values updated with <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga87e920427dcf2cec9c4d8dd852e5fd9bad62d2085a4a14f06e47d834c272afcb8">ETX_OTA_EC_NR</a> and <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gga517b9b57f7577c3040ab8830be50296da656f1abf8012c7ba7c3777e36c4e6a2e">ETSM_HAS_BEEN_READ</a> respectively.</p>
<p class="startli">After the validation process mentioned, this function will not do anything else in the case that the UART Hardware Protocol is chosen. However, if the BLE Hardware Protocol is selected instead, then this function will initialize the HM-10 Clone BLE Device whose UART peripheral connection is indicated via the <code>huart</code> param.</p>
<p class="startli">Finally, this function will set the chosen Hardware Protocol in non blocking mode for only the first transaction to be made and will initialize the first byte of the Global variable <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga4106c5686d33b66271fa81ef9f4e2a0b">Rx_Buffer</a> to <code>0</code> .</p>
</li>
</ul>
</dd>
<dd>
The logic of this function and of the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga8544487b6b161bad2598446b3a3f24ba">firmware_image_download_and_install</a> function require to have the first byte of <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga4106c5686d33b66271fa81ef9f4e2a0b">Rx_Buffer</a> set to <code>0</code> each time before a new ETX OTA Packet is received. This will allow the functions contained in the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html">Firmware Update module</a> to be able to differentiate an <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga578ab5347ebf2677f563566c7452dfa1">ETX_OTA_SOF</a> byte received from a non blocking mode reception (via <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#gae494a9643f29b87d6d81e5264e60e57b">HAL_UART_RxCpltCallback</a>) and a poll reception (via either HAL_UART_Receive or <a class="el" href="../../df/d51/group__hm10__ble__clone.html#gab1c820d2f69063e3bd0e857f7512a42a">get_hm10clone_ota_data</a> ).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">hardware_protocol</td><td>The Hardware Protocol into which it is desired to use the ETX OTA Protocol. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">huart</td><td>Pointer to the UART Handle Structure of the UART that it is desired to use for the requested <code>hardware_protocol</code> . </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">fw_config</td><td>Pointer to the struct that should already contain the latest data of the <a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a> .</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function expects that the <code>p_fw_config</code> pointer points to an already initialized <a class="el" href="../../d7/d98/structfirmware__update__config__data__t.html" title="Firmware Update Configurations Data parameters structure. This contains all the fields of the data th...">firmware_update_config_data_t</a> type structure via the <a class="el" href="../../d7/d86/group__firmware__update__config.html#gab021a0e06bed18957df92a4d4c17853e">firmware_update_configurations_init</a> function of the <a class="el" href="../../d7/d86/group__firmware__update__config.html">Firmware Update Configurations sub-module</a> .</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">GPIO_hm10_VCC</td><td>Pointer to the GPIO Definition Type of the GPIO Pin that is connected to the Transistor that connects or disconnects the Power Supply from the HM-10 Clone BLE Device. However, if the UART Hardware Protocol is selected (via the <code>hardware_protocol</code> param), then this param will not be used and, in that case, it is recommended to set its value to <code>NULL</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The Output Mode GPIO of the GPIO Definition Type towards which the <code>GPIO_hm10_VCC</code> param points to, will be used to electrically disconnect and then to reconnect the Power Supply of the HM-10 Clone BLE Device in order to force it to disconnect from a BLE Connection. </dd>
<dd>
The following are the possible values of the GPIO Pin designated here:<br  />
<br  />
* 0 (i.e., Low State) = The Power Supply of the HM-10 Clone BLE Device is not connected.<br  />
* 1 (i.e., High State) = The Power Supply of the HM-10 Clone BLE Device is connected.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">GPIO_is_hm10_default_settings</td><td>Pointer to the GPIO Definition Type of the GPIO Pin from which it can be requested to reset the Configuration Settings of the HM-10 Clone BLE Device to its default settings. However, if the UART Hardware Protocol is selected (via the <code>hardware_protocol</code> param), then this param will not be used and, in that case, it is recommended to set its value to <code>NULL</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The Input Mode GPIO of the GPIO Definition Type towards which the <code>GPIO_is_hm10_default_settings</code> param points to, will be used so that our MCU can know whether the user wants it to set the default configuration settings in the HM-10 Clone BLE Device. </dd>
<dd>
The following are the possible values of the GPIO Pin designated here:<br  />
<br  />
* 0 (i.e., Low State) = Do not reset/change the configuration settings of the HM-10 Clone BLE Device.<br  />
* 1 (i.e., High State) = User requests to reset the configuration settings of the HM-10 Clone BLE Device to its default settings. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">GPIO_hm10_state</td><td>Pointer to the STATE Pin of the HM-10 Clone BLE Device Hardware. However, if the UART Hardware Protocol is selected (via the <code>hardware_protocol</code> param), then this param will not be used and, in that case, it is recommended to set its value to <code>NULL</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The Input Mode GPIO of the GPIO Definition Type towards which the <code>GPIO_hm10_state</code> param points to, will be used to read the STATE Pin of the HM-10 Clone BLE Device. </dd>
<dd>
The following are the possible values of that STATE Pin:<br  />
<br  />
* 0 (i.e., Low State) = The HM-10 Clone BLE Device is not connected with an external BLE Device.<br  />
* 1 (i.e., High State) = The HM-10 Clone BLE Device is currently connected with an external BLE Device.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ETX_OTA_EC_OK</td><td>if the Firmware Update Module has been successfully initialized. </td></tr>
    <tr><td class="paramname">ETX_OTA_EC_ERR</td><td><ul>
<li>
If the <code>hardware_protocol</code> param requests to use an invalid Hardware Protocol.  </li>
<li>
If, after the Hardware Protocol Validation process and whenever choosing the BLE Hardware Protocol, there is an error/problem that impedes initializing or resetting all the configuration settings of the HM-10 Clone BLE Device to its Default Settings.  </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>César Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>October 30, 2023. </dd></dl>
<p><b>Local variable ret:</b> Used to hold the exception code value returned by either a <a class="el" href="../../d7/d86/group__firmware__update__config.html#ga3c090c80e3e49b7cdeff014206874cbf">FirmUpdConf_Status</a> , a <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> or a <a class="el" href="../../df/d51/group__hm10__ble__clone.html#gadc2c5644e3cbd6460a47f10b2f6b06a4">HM10_Clone_Status</a> function type.</p>
<p><b>Local variable default_ble_name:</b> Used to hold the Default BLE Name of the HM-10 Clone BLE Device as given by HM10_CLONE_DEFAULT_BLE_NAME .</p>
<p><b>Local variable default_pin_code:</b> Used to hold the Default Pin Code of the HM-10 Clone BLE Device as given by HM10_CLONE_DEFAULT_PIN .</p>

</div>
</div>
<a id="gaed7c2117e5cf4f734a92fdac60b0de39" name="gaed7c2117e5cf4f734a92fdac60b0de39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaed7c2117e5cf4f734a92fdac60b0de39">&#9670;&#160;</a></span>update_status_monitor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga517b9b57f7577c3040ab8830be50296d">ETSM_is_read_flag</a> update_status_monitor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/dbe/struct_e_t_x___o_t_a___status__monitor__t.html">ETX_OTA_Status_monitor_t</a> *&#160;</td>
          <td class="paramname"><em>status_monitor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the ETX OTA Status Monitor given by the implementer of the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html">Firmware Update module</a> with the one contained inside it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">status_monitor</td><td>Pointer to the implementer side's ETX OTA Status Monitor struct that wants to be updated with the one contained in the <a class="el" href="../../d8/d33/group__app__side__firmware__update.html">Firmware Update module</a> .</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The updated ETX_OTA_Status_monitor_t::ETSM_is_read_flag field value.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>César Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>November 21, 2023. </dd></dl>

</div>
</div>
<a id="ga1decce64469d19cbae18d197ba568cc4" name="ga1decce64469d19cbae18d197ba568cc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1decce64469d19cbae18d197ba568cc4">&#9670;&#160;</a></span>write_data_to_ram()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> write_data_to_ram </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>data_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_full_image</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write the contents of the "Data" field contained in a given ETX OTA Data Type Packet into the Flash Memory of our MCU/MPU's Application Firmware. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to the "Data" field of a given ETX OTA Data Type Packet, whose data wants to be written into the Flash Memory of our MCU/MPU's Application Firmware. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">data_len</td><td>Length in bytes of the "Data" field of the ETX Data Type Packet that is being pointed towards to, via the <code>data</code> param. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">is_first_block</td><td>Flag used to indicate whether the current ETX OTA Data Type Packet contains the first Flash Memory block with a <code>true</code> or otherwise with a <code>false</code> .</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ETX_OTA_EC_OK</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_NR</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_ERR</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>César Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd>
<dd>
EmbeTronicX (<a href="https://github.com/Embetronicx/STM32-Bootloader/tree/ETX_Bootloader_3.0">STM32-Bootloader GitHub Repository under ETX_Bootloader_3.0 branch</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>October 11, 2023. </dd></dl>
<p><b>Local variable ret:</b> Return value of a <a class="el" href="../../d8/d33/group__app__side__firmware__update.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> function function type.</p>
<p><b>Local variable p_data:</b> Pointer to the data at which the <code>data</code> param points to but in <code>uint32_t</code> Type.</p>
<p><b>Local variable word_data:</b> Array of 4 bytes (i.e., 1 word) initialized with the zeros (i.e., 0x00 in each byte) to then overwrite them if needed with the remaining bytes of the last word from the Application Firmware Image.</p>
<p><b>Local variable data_len_minus_one_word:</b> Holds the length in bytes of the "Data" field from the current ETX OTA Data Type Packet, except for the last four bytes.</p>
<p><b>Local variable remaining_data_len_of_last_word:</b> Should contain the remaining bytes of the last word from the Application Firmware Image that are pending to be written into our MCU/MPU's Flash Memory.</p>
<p><b>Local variable bytes_flashed:</b> Indicator of how many bytes of the current ETX OTA Packet's Payload have been written into the designated Flash Memory of the Application Firmware.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="gaf9ec7c0a0f4eccee501d167970523bca" name="gaf9ec7c0a0f4eccee501d167970523bca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf9ec7c0a0f4eccee501d167970523bca">&#9670;&#160;</a></span>p_GPIO_hm10_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d26/struct_g_p_i_o__def__t.html">GPIO_def_t</a>* p_GPIO_hm10_state = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to the GPIO Definition Type of the GPIO Pin connected to the STATE Pin of the HM-10 Clone BLE Device Hardware. </p>
<p>This Input Mode GPIO will be used to read the STATE Pin of the HM-10 Clone BLE Device. </p><dl class="section note"><dt>Note</dt><dd>The following are the possible values of that STATE Pin:<br  />
<br  />
* 0 (i.e., Low State) = The HM-10 Clone BLE Device is not connected with an external BLE Device.<br  />
* 1 (i.e., High State) = The HM-10 Clone BLE Device is currently connected with an external BLE Device. </dd></dl>

</div>
</div>
<a id="gad4490f105e5c3a9a7e31ec2ddcd040b5" name="gad4490f105e5c3a9a7e31ec2ddcd040b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad4490f105e5c3a9a7e31ec2ddcd040b5">&#9670;&#160;</a></span>p_GPIO_hm10_VCC</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d26/struct_g_p_i_o__def__t.html">GPIO_def_t</a>* p_GPIO_hm10_VCC = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to the GPIO Definition Type of the GPIO Pin connected to the Transistor that connects or removes the Power Supply of the HM-10 Clone BLE Device Hardware. </p>
<dl class="section note"><dt>Note</dt><dd>The following are the possible values of that GPIO Pin:<br  />
<br  />
* 0 (i.e., Low State) = The Power Supply of the HM-10 Clone BLE Device is not connected.<br  />
* 1 (i.e., High State) = The Power Supply of the HM-10 Clone BLE Device is connected. </dd></dl>

</div>
</div>
<a id="ga453bc9b09ccda4ced09f1330f8dd556d" name="ga453bc9b09ccda4ced09f1330f8dd556d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga453bc9b09ccda4ced09f1330f8dd556d">&#9670;&#160;</a></span>p_GPIO_is_hm10_default_settings</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d26/struct_g_p_i_o__def__t.html">GPIO_def_t</a>* p_GPIO_is_hm10_default_settings = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to the GPIO Definition Type of the GPIO Pin from which it can be requested to reset the Configuration Settings of the HM-10 Clone BLE Device to its default settings. </p>
<p>This Input Mode GPIO will be used so that our MCU can know whether the user wants it to set the default configuration settings in the HM-10 Clone BLE Device. </p><dl class="section note"><dt>Note</dt><dd>The following are the possible values of the GPIO Pin designated here:<br  />
<br  />
* 0 (i.e., Low State) = Do not reset/change the configuration settings of the HM-10 Clone BLE Device.<br  />
* 1 (i.e., High State) = User requests to reset the configuration settings of the HM-10 Clone BLE Device to its default settings. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
