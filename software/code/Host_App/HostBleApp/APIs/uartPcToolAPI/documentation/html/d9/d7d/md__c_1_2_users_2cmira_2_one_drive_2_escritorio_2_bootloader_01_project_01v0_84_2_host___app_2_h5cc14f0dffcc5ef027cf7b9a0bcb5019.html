<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UART PcTool API: An ETX OTA Firmware Update API for hosts.: Compilation and execution instructions of the main.c program</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">UART PcTool API: An ETX OTA Firmware Update API for hosts.
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Compilation and execution instructions of the main.c program</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a>Follow the steps and explanations given in the following content to be able to successfully compile and execute the <a class="el" href="../../d0/d29/main_8c.html">main.c</a> program, whose actual purpose is to be used as an API so that other programs in a different programming language other than C can just call the <a class="el" href="../../d0/d29/main_8c.html">main.c</a> program to take care of applying the ETX OTA Communication Protocol via the UART Hardware Protocol.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Configuring the program with custom user settings</h1>
<p>While on the API version of the ETX OTA Protocol (i.e., the <a class="el" href="../../d0/d29/main_8c.html">main.c</a> program provided in this project) requires most of the default settings for the ETX OTA Protocol to be given whenever calling the API provided via the <a class="el" href="../../d0/d29/main_8c.html">main.c</a> program, there are a few other default settings in this project that are as defined in the "etx_ota_config.h" file. If you were to require different settings than those ones, it is suggested to change the following define from that file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define ENABLE_APP_ETX_OTA_CONFIG              (0)          </span></div>
</div><!-- fragment --><p>such that the value of that definition is changed to 1 as shown in the following code illustration:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define ENABLE_APP_ETX_OTA_CONFIG              (1)          </span></div>
</div><!-- fragment --><p>This will allow you to enable the use of the "app_etx_ota_config.h" file, where you can call whatever definition contained inside the "etx_ota_config.h" but into "app_etx_ota_config.h" with whatever custom value you desire. This will allow you to set custom values for the program settings in a separate custom file but without rewriting the default values.</p>
<p>Now that this has been explained, proceed to set the desired configuration settings for this program.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Steps to compile the program</h1>
<p>To compile this program, run the below command to compile the application.</p>
<div class="fragment"><div class="line">$ gcc main.c etx_ota_protocol_host.c RS232/rs232.c -IRS232 -Wall -Wextra -o2 -o ETX_OTA_Protocol_UART_API</div>
</div><!-- fragment --><p><b>NOTE:</b> To be able to compile this program, make sure you have at GCC version &gt;= 11.4.0</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Steps to execute the program</h1>
<p>Once you have built the application, then execute it by using the following below syntax as a reference:</p>
<div class="fragment"><div class="line">$ ./PATH_TO_THE_COMPILED_FILE COMPORT_NUMBER PAYLOAD_PATH ETX_OTA_PAYLOAD_TYPE FLASH_PAGE_SIZE_IN_BYTES ETX_BL_PAGE_SIZE ETX_APP_PAGE_SIZE RS232_BAUDRATE RS232_MODE_DATA_BITS RS232_MODE_PARITY RS232_MODE_STOPBITS RS232_IS_FLOW_CONTROL SEND_PACKET_BYTES_DELAY TEUNIZ_LIB_POLL_COMPORT_DELAY TRY_AGAIN_SENDING_FWI_DELAY</div>
</div><!-- fragment --><p>where those Command Line Arguments stand for the following:</p><ul>
<li><b>PATH_TO_THE_COMPILED_FILE</b>: Path to the compiled file of the etx_ota_protocol_host.c program.</li>
<li><b>COMPORT_NUMBER</b>: Serial Port number that the user wishes for our host machine to communicate with the external desired device (e.g., an MCU).</li>
<li><b>PAYLOAD_PATH</b>: Path to the Payload file (i.e., the Firmware Update Image) that user wants our host machine to read to then pass its data to the external desired device (e.g., an MCU).</li>
<li><b>ETX_OTA_PAYLOAD_TYPE</b>: ETX OTA Payload Type for the given Payload file via the <b>PAYLOAD_PATH</b> Command Line Argument. For more details on the valid values for the <b>ETX_OTA_PAYLOAD_TYPE</b> Command Line Argument, see "ETX_OTA_Payload_t" enum from the "etx_ota_protocol_host.c" file.</li>
<li><b>FLASH_PAGE_SIZE_IN_BYTES</b>: Size in bytes of each Flash Memory Page of the slave MCU/MPU to communicate with via the ETX OTA Protocol.</li>
<li><b>ETX_BL_PAGE_SIZE</b>: Number of Flash Memory pages that have been designated for the Bootloader Firmware of the MCU/MPU with which the Serial Port communication is to be established with.</li>
<li><b>ETX_APP_PAGE_SIZE</b>: Number of Flash Memory pages that have been designated for the Application Firmware of the MCU/MPU with which the Serial Port communication is to be established with.</li>
<li><b>RS232_BAUDRATE</b>: Baud rate that wants to be used on the UART with which a communication with the slave device will be made.</li>
<li><b>RS232_MODE_DATA_BITS</b>: Data-bits with which we want the host to run the RS232 protocol.</li>
<li><b>RS232_MODE_PARITY</b>: Parity with which we want the host to run the RS232 protocol.</li>
<li><b>RS232_MODE_STOPBITS</b>: Stop-bits with which we want the host to run the RS232 protocol.</li>
<li><b>RS232_IS_FLOW_CONTROL</b>: Flag value to indicate whether we want the host to run the RS232 protocol with Flow Control with a <code>"1"</code> or otherwise with a <code>"0"</code> .</li>
<li><b>SEND_PACKET_BYTES_DELAY</b>: Desired delay in microseconds that is desired to request before having send a byte of data from a certain ETX OTA Packet that is in process of being sent to the MCU.</li>
<li><b>TEUNIZ_LIB_POLL_COMPORT_DELAY</b>: Desired delay in microseconds that is to be requested to apply each time before calling the <a class="el" href="../../d1/d82/group__teuniz__rs232__library.html#gaf66e3a0fc5eb7defb43aa61487a0b895" title="Gets the bytes received from the Serial Port via the RS232 protocol form the Teuniz RS232 Library ,...">RS232_PollComport()</a> function of the <a href="https://gitlab.com/Teuniz/RS-232">Teuniz RS232 Library</a>.</li>
<li><b>TRY_AGAIN_SENDING_FWI_DELAY</b>: Delay in microseconds that it is to be requested to apply in case that starting an ETX OTA Transaction fails once only.</li>
</ul>
<p>An example would be the following:</p>
<div class="fragment"><div class="line">$ ./APIs/PcTool/ETX_OTA_Protocol_UART_API.o 4 ../../Application/Debug/Blinky.bin 0 1024 34 86 115200 8 N 1 0 1000 500000 5000000</div>
</div><!-- fragment --><p>That's it!. ENJOY !!!. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
