<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UART PcTool API: An ETX OTA Firmware Update API for hosts.: Main Program</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">UART PcTool API: An ETX OTA Firmware Update API for hosts.
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Main Program</div></div>
</div><!--header-->
<div class="contents">

<p>This module contains the main application code.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/df0/group__main__program.html#ga0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:ga0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function of the main application program whose purpose is to act as an API that is to receive some ETX OTA Payload Data from the user via Command Line Arguments to then send it to a user specified device by using the ETX OTA Protocol.  <br /></td></tr>
<tr class="separator:ga0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This module contains the main application code. </p>
<p>The purpose of this application program is to act as an API that is to receive some ETX OTA Payload Data from the user via Command Line Arguments to then send it to a user specified external device by using the ETX OTA Protocol.</p>
<dl class="section author"><dt>Author</dt><dd>Cesar Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>December 27, 2023. </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga0ddf1224851353fc92bfbff6f499fa97" name="ga0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0ddf1224851353fc92bfbff6f499fa97">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function of the main application program whose purpose is to act as an API that is to receive some ETX OTA Payload Data from the user via Command Line Arguments to then send it to a user specified device by using the ETX OTA Protocol. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">argc</td><td>Contains the total number of Command Line Arguments that are given whenever executing the program contained in this file. The total number of arguments consider here will also include the command executed on the terminal window to run the program contained in this file. For example, if the Terminal Window Command used on the terminal window, in a Windows O.S., was <div class="fragment"><div class="line">.\APIs\PcTool\ETX_OTA_Protocol_UART_API 4 18 <span class="stringliteral">&quot;Cesar Miranda Meza&quot;</span> 2 1024 34 86 115200 8 N 1 0 1000 500000 5000000 </div>
</div><!-- fragment --> then <div class="fragment"><div class="line">argc = 16 </div>
</div><!-- fragment --> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argv</td><td>Holds the actual Command Line Arguments that are given whenever executing the program contained in this file. Each argument will be allocated in a different index within the <code>argv</code> param, but were the first index will contain the command executed on the terminal window to run the program contained in this file and then the actual Command Line Arguments will be placed subsequently. For example, if the Terminal Window Command used on the terminal window was <div class="fragment"><div class="line">.\APIs\PcTool\ETX_OTA_Protocol_UART_API 4 0 <span class="stringliteral">&quot;C:\Users\cmira\OneDrive\Escritorio\Bootloader Project v0.4\HostApp\PcTool\Application_Firmware.bin&quot;</span> 0 1024 34 86 115200 8 N 1 0 1000 500000 5000000 </div>
</div><!-- fragment --> then <div class="fragment"><div class="line">argv[16] = {<span class="stringliteral">&quot;.\APIs\PcTool\ETX_OTA_Protocol_UART_API&quot;</span> <span class="stringliteral">&quot;4&quot;</span> <span class="stringliteral">&quot;0&quot;</span> <span class="stringliteral">&quot;C:\Users\cmira\OneDrive\Escritorio\Bootloader Project v0.4\HostApp\PcTool\Application_Firmware.bin&quot;</span> <span class="stringliteral">&quot;0&quot;</span> <span class="stringliteral">&quot;1024&quot;</span> <span class="stringliteral">&quot;34&quot;</span> <span class="stringliteral">&quot;86&quot;</span> <span class="stringliteral">&quot;115200&quot;</span> <span class="stringliteral">&quot;8&quot;</span> <span class="stringliteral">&quot;N&quot;</span> <span class="stringliteral">&quot;1&quot;</span> <span class="stringliteral">&quot;0&quot;</span> <span class="stringliteral">&quot;1000&quot;</span> <span class="stringliteral">&quot;500000&quot;</span> <span class="stringliteral">&quot;5000000&quot;</span>} </div>
</div><!-- fragment --></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This <a class="el" href="../../de/df0/group__main__program.html#ga0ddf1224851353fc92bfbff6f499fa97">main</a> function expects to be given the following Command Line Arguments via the <code>argv</code> param:<br  />
 <ul>
<li>
Command Line Argument index 0 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93a58fe61957cb54e2d8de4c7b63e774638">TERMINAL_WINDOW_EXECUTION_COMMAND</a>  </li>
<li>
Command Line Argument index 1 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93ae05724b155f6ff2b36b97006c7183bac">COMPORT_NUMBER</a>  </li>
<li>
Command Line Argument index 2 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93a9c029b429e530c02894ccfffc9947c5f">PAYLOAD_SIZE</a>  </li>
<li>
Command Line Argument index 3 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93a48724fbc7eca03354e13f71e564d7af5">PAYLOAD_PATH_OR_DATA</a>  </li>
<li>
Command Line Argument index 4 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93acd228fdf0caf28648b3b9e7c29e3e77d">ETX_OTA_PAYLOAD_TYPE</a>  </li>
<li>
Command Line Argument index 5 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93a2c55de8bd8404605ee6d5d98f716effb">FLASH_PAGE_SIZE_IN_BYTES</a> </li>
<li>
Command Line Argument index 6 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93a131928403be74fe1dad250f828d545bd">ETX_BL_PAGE_SIZE</a> </li>
<li>
Command Line Argument index 7 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93a7854fbfc9ef7b04a27d21c0894623e46">ETX_APP_PAGE_SIZE</a> </li>
<li>
Command Line Argument index 8 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93a12ea19801fb0ba0816da9aed33210bc5">RS232_BAUDRATE</a> </li>
<li>
Command Line Argument index 9 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93ac3a375503318090020607e9b5c125909">RS232_MODE_DATA_BITS</a> </li>
<li>
Command Line Argument index 10 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93a6724d6a7f8e501f576adfaf86e781399">RS232_MODE_PARITY</a> </li>
<li>
Command Line Argument index 11 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93a70149875eed3f21d590421dc8d455ea5">RS232_MODE_STOPBITS</a> </li>
<li>
Command Line Argument index 12 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93afcb9b2bac84d7a5ad441fc3539a878c9">RS232_IS_FLOW_CONTROL</a> </li>
<li>
Command Line Argument index 13 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93a89fd1e738a591a76a6de50bcec320771">SEND_PACKET_BYTES_DELAY</a> </li>
<li>
Command Line Argument index 14 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93a4bd87328ecc4315b56c659443c234e0a">TEUNIZ_LIB_POLL_COMPORT_DELAY</a> </li>
<li>
Command Line Argument index 15 = <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93a006b79f77e7d0ba0a0524f5490c807b2">TRY_AGAIN_SENDING_FWI_DELAY</a> </li>
</ul>
where each of the values, given in String Type, are expected to be humanly read as the actual values that they should have. For example, if Command Line Argument index 1 String Type value = "1", then it will mean that the other end of the API requested the <a class="el" href="../../de/df0/group__main__program.html">Main Program</a> to set the Comport Number 1. Another example would be: if Command Line Argument index 4 String Type value = "1024", then it will mean that the other end of the API requested the <a class="el" href="../../de/df0/group__main__program.html">Main Program</a> to set the Flash Page Size to be 1024 bytes.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ETX_OTA_EC_OK</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_NA</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_INV_CMD_LINE_ARG</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_UNRECOG_PAYLOAD</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_OPEN_COM_ERR</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_OPEN_FILE_ERR</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_READ_FILE_ERR</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_START_CMD_SEND_DATA_ERR</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_START_CMD_NACK_RESP</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_HEADER_PCKT_SEND_DATA_ERR</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_HEADER_PCKT_NACK_RESP</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_DATA_PCKT_SEND_DATA_ERR</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_DATA_PCKT_NACK_RESP</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_END_CMD_SEND_DATA_ERR</td><td></td></tr>
    <tr><td class="paramname">ETX_OTA_EC_END_CMD_NACK_RESP</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>For more details on the returned values, see <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> .</dd>
<dd>
This function also sends the returned value (i.e., retval) to the other program that called the API of the <a class="el" href="../../de/df0/group__main__program.html">Main Program</a> via the Stream (i.e., via the printf function), since that is the means of communication between the <a class="el" href="../../de/df0/group__main__program.html">Main Program</a> and the other program previously mentioned.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>César Miranda Meza (<a href="#" onclick="location.href='mai'+'lto:'+'cmi'+'ra'+'nda'+'me'+'za3'+'@h'+'otm'+'ai'+'l.c'+'om'; return false;">cmira<span class="obfuscator">.nosp@m.</span>ndam<span class="obfuscator">.nosp@m.</span>eza3@<span class="obfuscator">.nosp@m.</span>hotm<span class="obfuscator">.nosp@m.</span>ail.c<span class="obfuscator">.nosp@m.</span>om</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>December 27, 2023. </dd></dl>
<p><b>Local variable ETX_OTA_api:</b> <a class="el" href="../../d9/d8f/struct_e_t_x___o_t_a___a_p_i__t.html">ETX_OTA_API_t</a> struct where all the data received by the API from the <a class="el" href="../../de/df0/group__main__program.html">Main Program</a> will be stored in.</p>
<p><b>Local variable ret:</b> Used to hold the exception code value returned by a <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ga87e920427dcf2cec9c4d8dd852e5fd9b">ETX_OTA_Status</a> function type.</p>
<p><b>Local variable tmp_rs232_mode_data_bits:</b> Used to temporarily hold the value of the <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93ac3a375503318090020607e9b5c125909">RS232_MODE_DATA_BITS</a> Command Line Argument. </p><dl class="section note"><dt>Note</dt><dd>The size of this variable is 100 more times than needed to make sure that any undesired <code>NULL</code> value is captured in here in order to prevent Memory Overflow whenever populating this variable via the strcpy_s function, which is what would happen if we were to directly populate this field into the ETX_OTA_api local variable struct with the strcpy_s function.</dd></dl>
<p><b>Local variable tmp_rs232_mode_parity:</b> Used to temporarily hold the value of the <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93a6724d6a7f8e501f576adfaf86e781399">RS232_MODE_PARITY</a> Command Line Argument. </p><dl class="section note"><dt>Note</dt><dd>The size of this variable is 100 more times than needed to make sure that any undesired <code>NULL</code> value is captured in here in order to prevent Memory Overflow whenever populating this variable via the strcpy_s function, which is what would happen if we were to directly populate this field into the ETX_OTA_api local variable struct with the strcpy_s function.</dd></dl>
<p><b>Local variable tmp_rs232_mode_stopbits:</b> Used to temporarily hold the value of the <a class="el" href="../../de/db1/group__etx__ota__protocol__host.html#ggaac7e75c63b5a99e703ca7945c9c97f93a70149875eed3f21d590421dc8d455ea5">RS232_MODE_STOPBITS</a> Command Line Argument. </p><dl class="section note"><dt>Note</dt><dd>The size of this variable is 100 more times than needed to make sure that any undesired <code>NULL</code> value is captured in here in order to prevent Memory Overflow whenever populating this variable via the strcpy_s function, which is what would happen if we were to directly populate this field into the ETX_OTA_api local variable struct with the strcpy_s function.</dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
